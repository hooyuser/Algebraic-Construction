

\chapter{Module}
\section{Basic Concepts}
\begin{definition}{Module}{}
    Let $R$ be a ring. An left \textbf{$R$-module} is an abelian group $M$ with a binary operation $R\times M\to M$ such that
    \begin{enumerate}[(i)]
        \item $r(m+n)=rm+rn$ for all $r\in R$ and $m, n\in M$.
        \item $(r+s)m=rm+sm$ for all $r, s\in R$ and $m\in M$.
        \item $(rs)m=r(sm)$ for all $r, s\in R$ and $m\in M$.
        \item $1m=m$ for all $m\in M$.
    \end{enumerate}
    If $R$ is a commutative ring, then $M$ is called a \textbf{commutative $R$-module}.
\end{definition}


\begin{definition}{Homomorphism of $R$-modules}{}
    Let $R$ be a ring and $M, N$ be $R$-modules. A map $f:M\to N$ is called an \textbf{$R$-module homomorphism} if
    \begin{enumerate}[(i)]
        \item $f(m+n)=f(m)+f(n)$ for all $m, n\in M$.
        \item $f(rm)=rf(m)$ for all $r\in R$ and $m\in M$.
    \end{enumerate}
    If $f$ is bijective, then $f$ is called an \textbf{$R$-module isomorphism}. If $M=N$, then $f$ is called an \textbf{$R$-module endomorphism}. If $f$ is bijective, then $f$ is called an \textbf{$R$-module automorphism}. Another name for a homomorphism of $R$-modules is an  \textbf{$R$-linear map}.
\end{definition}


\begin{proposition}{Ring Action on an Abelian Group}{}
From the perspective of representation theory, a module is a ring action on an abelian group. To be more precise, a ring $R$ can be regarded as an $\mathsf{Ab}$-enriched category with only one object, called the delooping of $R$, denoted $\mathsf{B}R$. $\mathsf{Ab}$ itself is an $\mathsf{Ab}$-enriched category. Thus a left $R$-module $M$ is a functor between $\mathsf{Ab}$-enriched categories $\mathcal{M}:\mathsf{B}R\to \mathsf{Ab}$. 
\[
    \begin{tikzcd}[ampersand replacement=\&]
        \mathsf{B}R\&[-25pt]\&[+10pt]\&[-30pt] \mathsf{Ab}\&[-30pt]\&[-30pt] \\ [-15pt] 
        *  \arrow[dd, "r\in R"{name=L, left}] 
        \&[-25pt] \& [+10pt] 
        \& [-30pt] M\arrow[dd, "r\cdot\left(-\right)\in \mathrm{End}_{\mathsf{Ab}}(M)"{name=R}] \&[-30pt]\\ [-10pt] 
        \&  \phantom{.}\arrow[r, "\mathcal{M}", squigarrow]\&\phantom{.}  \&   \\[-10pt] 
        * \& \& \&  M\&
    \end{tikzcd}
\]
As a map between objects, $\mathcal{M}$ assigns an abelian group for $\{*\}$. As a map between morphisms, $\mathcal{M}$ specifies a ring homomorphism $\sigma_M:R\to \mathrm{End}_{\mathsf{Ab}}(M)$. Define the ring representation category to be the category of all $\mathsf{Ab}$-enriched functors between $\mathsf{Ab}$-enriched categories $\mathsf{B}R$ and $\mathsf{Ab}$, denoted by
\[
\mathrm{Rep}_{\mathsf{Ab}}(R):=[\mathsf{B}R, \mathsf{Ab}]_{\mathsf{Ab}\text{-}\mathsf{Cat}}.
\]
Then we have category isomorphism 
\[
    \mathrm{Rep}_{\mathsf{Ab}}(R)\cong R\text{-}\mathsf{Mod}.
\]
\end{proposition}

\begin{proposition}{Ring Homomorphism $f:R\to S$ Induces Functor $f_*:S\text{-}\mathsf{Mod}\to R\text{-}\mathsf{Mod}$}{ring_homomorphism_induces_functor}
    Let $R$ and $S$ be rings with a ring homomorphism $f: R\to S$. Then every $S$-module $M$ is an $R$-module by defining the scalar multiplication as
    \begin{align*}
        R\times M&\longrightarrow M\\
        (r, m)&\longmapsto f(r)m
    \end{align*}
    or equivalently through $R\to S\to \mathrm{End}_{\mathsf{Ab}}(M)$. This defines a functor $f_*: S\text{-}\mathsf{Mod}\to R\text{-}\mathsf{Mod}$, which is identify map on objects and morphisms.
    \[
        \begin{tikzcd}[ampersand replacement=\&]
            S\text{-}\mathsf{Mod}\&[-25pt]\&[+10pt]\&[-30pt] R\text{-}\mathsf{Mod}\&[-30pt]\&[-30pt] \\ [-15pt] 
            M  \arrow[dd, "g"{name=L, left}] 
            \&[-25pt] \& [+10pt] 
            \& [-30pt] f_*M\arrow[dd, "g"{name=R}] \&[-30pt]\\ [-10pt] 
            \&  \phantom{.}\arrow[r, "f_*", squigarrow]\&\phantom{.}  \&   \\[-10pt] 
            N \& \& \&  f_*N\&
        \end{tikzcd}
        \]  
        The functor $f_*: S\text{-}\mathsf{Mod}\to R\text{-}\mathsf{Mod}$ can also be denoted as $\mathrm{Res}_{R\to S}: S\text{-}\mathsf{Mod}\to R\text{-}\mathsf{Mod}$. We have the following adjunction
        \[
            \begin{tikzcd}[ampersand replacement=\&]
                R\text{-}\mathsf{Mod} \arrow[r, "f^*=S\otimes_R-"{name=U}, bend left, start anchor=east, yshift=1.7ex, end anchor=west] \&[+22pt] 
                S\text{-}\mathsf{Mod} \arrow[l, "{f_*=\mathrm{Res}_{R\to S}}"{name=D, anchor=north}, bend left, start anchor=west, yshift=-1.5ex, end anchor=east]
                \arrow[phantom, from=U, to=D, "\dashv"{rotate=-90}]
            \end{tikzcd}    
        \]
        Also we have the following adjunction
        \[
            \begin{tikzcd}[ampersand replacement=\&]
                R\text{-}\mathsf{Mod} \arrow[r, "f^*=S\otimes_R-"{name=U}, bend left=42, start anchor=east, yshift=1.7ex, end anchor=west]\arrow[r, "{f^{!}=\mathrm{Hom}_{R\text{-}\mathsf{Mod}}\left(S,M\right)}"'{name=D}, bend right=42, start anchor=east, yshift=-1.7ex, end anchor=west] \&[+62pt] 
                S\text{-}\mathsf{Mod} \arrow[l, "{f_*=\mathrm{Res}_{R\to S}}"{name=M, anchor=north}]
                \arrow[phantom, from=U, to=M, "\dashv"{rotate=-90}]
                \arrow[phantom, from=M, to=D, "\dashv"{rotate=-90}]
            \end{tikzcd}
        \]
        Since $f_*$ has both left and right adjoint, it is an exact functor.
\end{proposition}
\begin{remark}
   The notation $f_*$ comes from the case when $R$ and $S$ are commutative rings. $f$ induces a morphism of affine schemes $\mathrm{Spec}(S)\to \mathrm{Spec}(R)$. Let $\widetilde{M}$ be the associated quasi-coherent sheaf on $\mathrm{Spec}(S)$. Then the global section of $\widetilde{M}$ is the $S$-module $M$
    \[
        \Gamma\left(\mathrm{Spec}(S), \widetilde{M}\right)=M
    \]
    Consider the direct image sheaf $f_*\widetilde{M}$ on $\mathrm{Spec}(R)$. The global section of $f_*\widetilde{M}$ is the $R$-module $f_*M$
    \[
        \Gamma\left(\mathrm{Spec}(R), f_*\widetilde{M}\right)=f_*M
    \]
\end{remark}

\noindent In particular, ring homomorphism $R\to S$ makes $S$ an $R$-module.

\begin{definition}{Noetherian Module}{}
Let $R$ be a commutative ring, and let $M$ be an $R$-module. We say $M$ is \textbf{Noetherian} if one of the following equivalent conditions holds:
\begin{enumerate}[(i)]
    \item Every submodule of $M$ is finitely generated.
    \item Every ascending chain of submodules of $M$ stabilizes; that is, if
    $$
    N_1 \subseteq N_2 \subseteq N_3 \subseteq \cdots
    $$
    is a chain of submodules of $M$, then $\exists i$ such that $N_i=N_{i+1}=N_{i+2}=\ldots$.
    \item Every nonempty family of submodules of $M$ has a maximal element w.r.t. inclusion.
\end{enumerate}
\end{definition}


\begin{definition}{Annihilator}{}
    Let $R$ be a ring, and let $M$ be a left $R$-module. Suppose $S$ is a non-empty subset of $M$. The \textbf{annihilator} of $S$, denoted $\operatorname{Ann}_R(S)$, is a left ideal of $R$ defined by 
    $$
    \operatorname{Ann}_R(S)=\{r \in R \mid r s=0 \text { for all } s \in S\}.
    $$
    If $S=\{ x \}$, then we write $\operatorname{Ann}_R(x)$ instead of $\operatorname{Ann}_R(\{ x \})$. We have
    $$
    \operatorname{Ann}_R(S)=\bigcap_{s \in S} \operatorname{Ann}_R(s).
    $$
\end{definition}

\begin{proposition}{}{}
    If $N$ is a submodule of $M$, then 
    \[
        \operatorname{Ann}_R(N)=\{r \in R \mid r s=0 \text { for all } s \in N\}=\ker \left(R\longrightarrow\mathrm{End}_{\mathsf{Ab}}\left(N\right)\right)  
    \]
    is a two-sided ideal of $R$. Through $R/\operatorname{Ann}_R(N)\to \mathrm{End}_{\mathsf{Ab}}\left(N\right)$, we can regard $N$ as an $R/\operatorname{Ann}_R(N)$-module. In general, if $I$ is a two-sided ideal of $R$ such that $I\subseteq \operatorname{Ann}_R(N)$, we can regard $N$ as an $R/I$-module.
\end{proposition}
\begin{prf}
    By the universal property of quotient module, we have the following commutative diagram
    \[
        \begin{tikzcd}
            R \arrow[r] \arrow[d, "\pi"'] & \mathrm{End}_{\mathsf{Ab}}\left(N\right) \\
            R/I \arrow[ru, dashed]        &                                         
            \end{tikzcd}
    \]
\end{prf}

\begin{definition}{Faithful Module}{}
    Let $R$ be a ring, and let $M$ be a left $R$-module. We say $M$ is \textbf{faithful} if $\operatorname{Ann}_R(M)=0$, or equivalently, the map $R\to \mathrm{End}_{\mathsf{Ab}}(M)$ is injective.
\end{definition}

\begin{proposition}{Properties of Annihilator}{}
    Let $R$ be a ring, and let $M$ be a left $R$-module. 
    \begin{enumerate}[(i)]
        \item If $x\in M$, then $\operatorname{Ann}_R(x)=R$ if and only if $x=0$.
        \item If $S$ is a non-empty subset of $M$ and $N$ is the submodule generated by $S$, then $\operatorname{Ann}_R(N)\subseteq \operatorname{Ann}_R(S)$. If $R$ is commutative, then $\operatorname{Ann}_R(N)= \operatorname{Ann}_R(S)$.
        \item $M$ as an $R/\operatorname{Ann}_R(M)$-module is faithful.
    \end{enumerate}
\end{proposition}






\begin{definition}{Cyclic Module}{}
    Let $R$ be a ring, and let $M$ be a left $R$-module. We say $M$ is a \textbf{cyclic module} if there exists an element $m\in M$ such that 
    \[
      M=Rm:=\left\{rm\midv r\in R\right\}.
    \]
\end{definition}

\begin{definition}{Simple Module}{}
    Let $R$ be a ring, and let $M$ be a left $R$-module. We say $M$ is a \textbf{simple module} if $M\neq 0$ and the only submodules of $M$ are $\{0\}$ and $M$ itself.
\end{definition}

\begin{proposition}{}{}
    Let $R$ be a ring, and let $I$ be a left ideal of $R$. Then
    \begin{enumerate}[(i)]
        \item $I$ is a simple left $R$-module if and only if $I$ is a minimal nonzero left ideal.
        \item $R/I$ is a simple left $R$-module if and only if $I$ is a maximal left ideal.
    \end{enumerate}
\end{proposition}
\begin{prf}
    \begin{enumerate}[(i)]
        \item Suppose that $I$ is a simple left $R$-module. Then $I\neq 0$ and the only submodules of $I$ are $\{0\}$ and $I$ itself. Hence, $I$ is a minimal nonzero left ideal. 
        
        Conversely, if $I$ is a minimal nonzero left ideal, and $J$ is a $R$-submodule of $I$, then $J$ is an left ideal of $R$. By the minimality of $I$, $J$ must be either $\{0\}$ or $I$. Hence, $I$ is a simple left $R$-module.

        \item Suppose that $R/I$ is a simple left $R$-module. Let $J$ be a left ideal of $R$ such that $I\subseteq J$. Then $J/I$ is a left ideal of $R/I$. Since $R/I$ is simple, we have either $J/I=\{0\}$ or $J/I=R/I$. If $J/I=\{0\}$, then $J=I$. If $J/I=R/I$, then $J=R$. Hence, $I$ is a maximal left ideal. 

        Suppose that $R/I$ is not a simple left $R$-module. Then there exists a left ideal $\overline{J}=J/I$ of $R/I$ such that $I\subseteq J\subsetneq R$. Hence, $I$ is not a maximal left ideal.
    \end{enumerate}
\end{prf}

\begin{proposition}{Equivalent Characterizations of Simple Module}{}
    Let $R$ be a ring, and let $M$ be a left $R$-module. The following are equivalent:
    \begin{enumerate}[(i)]
        \item $M$ is a simple module.
        \item For any $m\in M-\{0\}$, the cyclic submodule generated by $m$ is equal to $M$, namely
        \[
            M=Rm.
        \]
        \item There exists a maximal left ideal $\mathfrak{m}$ of $R$ such that $M\cong R/\mathfrak{m}$.
    \end{enumerate}
    
\end{proposition}

\begin{prf}
    We prove $\text{(i)}\Rightarrow(ii)\Rightarrow(iii)\Rightarrow(i)$.

\paragraph{$(i)\;\Rightarrow\;(ii)$}
Assume $M$ is simple and let $0\neq m\in M$.  
The set $Rm$ is a submodule of $M$ containing $m$, hence non–zero.  
By simplicity, the only non–zero submodule is $M$ itself; therefore $Rm=M$.

\paragraph{$(ii)\implies(iii)$}
Choose any non–zero $m\in M$ and consider the $R$–homomorphism
\[
    \varphi:R\longrightarrow M,\qquad r\longmapsto r m .
\]
Because $m\neq0$ and $Rm=M$ by assumption, $\varphi$ is surjective.  
Set $\frak m := \ker\varphi$ (a left ideal).  By the first isomorphism theorem,
$M\cong R/\frak m$.

It remains to show that $\frak m$ is maximal.  
Let $I$ be a left ideal with $\frak m\subsetneq I\subsetneq R$.  
Pick $r\in I\setminus\frak m$; then $\bar r:=r+\frak m\neq0$ in $R/\frak m\cong M$.  
Property (ii) transfers through isomorphisms, so $\bar r$ must generate all of
$R/\frak m$: 
\[
    R\bar r \;=\; R/\frak m .
\]
But $R\bar r = I/\frak m$ (by definition of $I$), hence $I/\frak m = R/\frak m$,
which forces $I=R$.  Therefore no left ideal lies strictly between $\frak m$ and
$R$; $\frak m$ is maximal.

\paragraph{\boldmath$(iii)\;\Rightarrow\;(i)$}
Suppose $M\cong R/\frak m$ with $\frak m$ a maximal left ideal.  
Submodules of $R/\frak m$ correspond one-to-one with left ideals $I$ satisfying
$\frak m\subseteq I\subseteq R$:
\[
    I\;\longmapsto\; I/\frak m .
\]
Because $\frak m$ is maximal, the only such $I$ are $\frak m$ and $R$,
yielding only the zero submodule and all of $R/\frak m$.  Hence $R/\frak m$,
and therefore $M$, is simple.

\smallskip
Thus $(i)\Leftrightarrow(ii)\Leftrightarrow(iii)$, completing the proof.
\end{prf}

\section{Construction}
\subsection{Free Object}
\begin{definition}{Free Module}{}
    Let $R$ be a ring and $S$ be a set. The \textbf{free $R$-module } on $S$, denoted by $\mathrm{Free}_{R\text{-}\mathsf{Mod}}(S)$, together with a map $\iota:S\to \mathrm{Free}_{R\text{-}\mathsf{Mod}}(S)$, is defined by the following universal property: for any $R$-module $M$ and any map $f:S\to M$, there exists a unique $R$-linear map $\widetilde{f}:\mathrm{Free}_{R\text{-}\mathsf{Mod}}(S)\to M$ such that the following diagram commutes
    \begin{center}
        \begin{tikzcd}[ampersand replacement=\&]
            \mathrm{Free}_{R\text{-}\mathsf{Mod}}(S)\arrow[r, dashed, "\exists !\,\widetilde{f}"]  \& M\\[0.3cm]
            S\arrow[u, "\iota"] \arrow[ru, "f"'] \&  
        \end{tikzcd}
    \end{center}
    The free $R$-module $\mathrm{Free}_{R\text{-}\mathsf{Mod}}(S)$ can be contructed as the direct sum of copies of $R$ indexed by $S$, i.e. 
    \[
        \mathrm{Free}_{R\text{-}\mathsf{Mod}}(S)\cong \bigoplus_{s\in S}R.
    \]
\end{definition}


\begin{example}{Forgetful Functor $U$}{}
    Let $R$ be a ring. Then the forgetful functor $U:R\text{-}\mathsf{Mod}\to \mathsf{Set}$ forgets the $R$-module structure of an $R$-module. 
    \begin{enumerate}[(i)]
        \item $U$ is representable by $\left(R, 1_R\right)$. The natural isomorphism $\phi:\mathrm{Hom}_{R\text{-}\mathsf{Mod}}\left(R, -\right)\xRightarrow{\sim} U$ is given by 
        \begin{align*}
            \phi_M:\mathrm{Hom}_{R\text{-}\mathsf{Mod}}\left(R, M\right)&\longrightarrow U(M)\\
            f&\longmapsto f(1_R).
        \end{align*}
        An $R$-linear map $f:R\to M$ is uniquely determined by $f(1_R)$, and vice versa.
        \item $U$ is faithful but not full.
    \end{enumerate}
\end{example}
 

\begin{proposition}{Free-Forgetful Adjunction $\mathrm{Free}_{R\text{-}\mathsf{Mod}}\dashv U$}{}
    Let $R$ be a ring. Then the free $R$-module functor $\mathrm{Free}_{R\text{-}\mathsf{Mod}}$ is left adjoint to the forgetful functor $U$.
    \[
        \begin{tikzcd}[ampersand replacement=\&]
            R\text{-}\mathsf{Mod} \arrow[r, "\mathrm{Free}_{R\text{-}\mathsf{Mod}}"{name=U}, bend left, start anchor=east, yshift=1.7ex, end anchor=west] \&[+18pt] 
            \mathsf{Set} \arrow[l, "{U}"{name=D, anchor=north}, bend left, start anchor=west, yshift=-1.5ex, end anchor=east]
            \arrow[phantom, from=U, to=D, "\dashv"{rotate=-90}]
        \end{tikzcd}    
    \]
    
    For any set $S$ and any $R$-module $M$, we have a natural isomorphism
    \[
        \mathrm{Hom}_{R\text{-}\mathsf{Mod}}\left(\mathrm{Free}_{R\text{-}\mathsf{Mod}}(S), M\right)\cong \mathrm{Hom}_{\mathsf{Set}}\left(S, U(M)\right).
    \]
\end{proposition}

\begin{definition}{Basis of a Module}{}
    Let $R$ be a ring, $M$ be an $R$-module and $S\subseteq M$ be a subset. The inclusion map $i:S\hookrightarrow M$ induces a map $\widetilde{i}:R^{\oplus S}\to M$ by the universal property of free $R$-module. 
    \begin{center}
        \begin{tikzcd}[ampersand replacement=\&]
            R^{\oplus S}\arrow[r, dashed, "\exists !\,\widetilde{i}"]  \& M\\[0.3cm]
            S\arrow[u, "\iota"] \arrow[ru, "i"'] \&  
        \end{tikzcd}
    \end{center}
    \begin{itemize}
        \item If $\widetilde{i}$ is injective, then $S$ is called a \textbf{linearly independent subset of $M$}. If $\widetilde{i}$ is not injective, then $S$ is called a \textbf{linearly dependent subset of $M$}.
        \item If $\widetilde{i}$ is surjective, then $S$ is called a \textbf{generating set of $M$}. 
        \item If $\widetilde{i}$ is bijective, then $S$ is called a \textbf{basis of $M$}.
    \end{itemize}
\end{definition}

\begin{proposition}{}{}
    A $R$-module $M$ has a basis if and only if $M$ is a free $R$-module.
\end{proposition}

\begin{definition}{Invariant Basis Number}{}
    A ring $R$ is said to have the \textbf{invariant basis number} property if 
    \[
    R^{\oplus S}\cong R^{\oplus T}\iff |S|=|T|.
    \]
\end{definition}

\begin{proposition}{Commutative Ring Has IBN Property}{}
    Every nonzero commutative ring has the invariant basis number property.
\end{proposition}

\begin{definition}{Rank of a Free Module over Commutative Ring}{}
    Let $R$ be a nonzero commutative ring and $M$ be a free $R$-module. Suppose $M\cong R^{\oplus S}$ for some set $S$. Then the \textbf{rank of $M$}, denoted by $\mathrm{rk}_R(M)$, is defined as the cardinality of $S$.
\end{definition}



\begin{definition}{Finitely Generated Module}{}
    We say $M$ is a \textbf{finitely generated $R$-module} if 
    one of the following equivariant conditions holds:
    \begin{enumerate}[(i)]
        \item there exist $x_1, \ldots, x_n \in M$ such that every element of $M$ is an $R$-linear combination of the $x_i$. 
        \item there exists an epimorphism $R^{\oplus n} \rightarrow M$ for some $n \in \mathbb{Z}_+$.
        \item there exists an exact sequence
        \[
        R^{\oplus n}  \longrightarrow M \longrightarrow 0
        \]
        for some $n\in \mathbb{N}$.
        \item $S\cong R^{\oplus n}/M$ for some $n\in \mathbb{Z}_+$ and some submodule $M$ of $R^{\oplus n}$.
    \end{enumerate}
\end{definition}

\begin{proposition}{}{finiteness_of_R_module_implies_finiteness_of_S_module}
    Let $R\to S$ be a ring homomorphism and $M$ be an $S$-module. If $M$ as an $R$-module is finitely generated, then $M$ as an $S$-module is also finitely generated.
\end{proposition}
\begin{prf}
    Since $M$ is finitely generated as an $R$-module, there exists an epimorphism $h:R^{n}\to M$ for some $n\in \mathbb{Z}_+$. Define 
    \begin{align*}
        \iota_1:\{1,\cdots,n\}&\longrightarrow R^{n},\\
        i&\longmapsto e_i,
    \end{align*}
    where $e_i$ is the $i$-th standard basis of $R^{n}$ and 
    \begin{align*}
        i:\{1,\cdots,n\}&\longrightarrow M,\\
        i&\longmapsto h(e_i).
    \end{align*}
    Then we have $h\circ \iota_1=i$. Define
    \begin{align*}
        \iota_2:\{1,\cdots,n\}&\longrightarrow S^{n},\\
        i&\longmapsto e_i',
    \end{align*}
    where $e_i'$ is the $i$-th standard basis of $S^{n}$. By the universal property of free $S$-module, there exists a unique $S$-linear map $g:S^{n}\to M$ such that $g\circ \iota_2=i$. By the universal property of free $R$-module, there exists a unique $R$-linear map $f:R^{n}\to S^{n}$ such that $f\circ \iota_1=\iota_2$. Therefore, we have 
    \[
        (g\circ f)\circ \iota_1=g\circ \iota_2=i=h\circ \iota_1.
    \]
    By the universal property of free $R$-module, we have $g\circ f=h$. Since $h$ is surjective, $g$ is surjective. Therefore, $M$ is finitely generated as an $S$-module.
    \[
        \begin{tikzcd}
            R^n \arrow[rr, "h", two heads] \arrow[rd, "f"] &                                                                                               & M \\
                                                           & S^n \arrow[ru, "g"]                                                                           &   \\[+2em]
                                                           & {\{1,\cdots,n\}} \arrow[luu, "\iota_1", hook'] \arrow[u, "\iota_2"', hook'] \arrow[ruu, "i"'] &  
            \end{tikzcd}
    \]
\end{prf}

\begin{definition}{Finitely Presented Module}{}
    We say $M$ is a \textbf{finitely presented $R$-module} if 
    there exists an exact sequence
    \[
    R^{\oplus m} \longrightarrow R^{\oplus n} \longrightarrow M \longrightarrow 0
    \]
    for some $m, n\in \mathbb{Z}_+$.
\end{definition}

\subsection{Tensor Product}

\begin{definition}{Bimodule}{bimodule}
    Let $R$ and $S$ be rings. An $(R, S)$-\textbf{bimodule} is an abelian group $M$ together with a structure of left $R$-module and a structure of right $S$-module such that
    \[
        r(ms)=(rm)s     
    \]
    for all $r\in R$, $s\in S$, and $m\in M$.
\end{definition}

\begin{example}{Examples of Bimodule}{}
    Let $R$ and $S$ be rings.
    \begin{itemize}
        \item If $M$ is a left $R$-module, then $M$ is an $(R,\mathbb{Z})$-bimodule. 
        \item If $M$ is a right $S$-module, then $M$ is a $(\mathbb{Z},S)$-bimodule.
        \item If $R$ is a commutative ring, then every left $R$-module is an $(R,R)$-bimodule, and every right $R$-module is also an $(R,R)$-bimodule. In particular, every abelian group is a $\mathbb{Z}$-module, hence a $(\mathbb{Z},\mathbb{Z})$-bimodule.
        \item Any two-sided ideal of a ring $R$ is an $(R,R)$-bimodule, with the ring multiplication both as the left and as the right multiplication. In particular, $R$ itself is an $(R,R)$-bimodule.
        \item If $M$ is a right $R$-module, then $M$ is an $(\mathrm{End}_{\mathsf{Mod}\text{-}R}(M),R)$-bimodule, where the left multiplication is given by function application.
        \item If $M$ is a left $R$-module, then $M$ is an $(R,\mathrm{End}_{R\text{-}\mathsf{Mod}}(M)^{\mathrm{op}})$-bimodule, where the right multiplication is given by function application.
    \end{itemize}
    
\end{example}

\begin{definition}{Balanced Product}{}
    Let $R$ be a ring, $M$ be a right $R$-module, $N$ be a left $R$-module and $G$ be an abelian group. A map $b:M\times N\to G$ is called a \textbf{$R$-balanced product} if 
    \begin{enumerate}[(i)]
        \item $b(m_1+m_2, n)=b(m_1, n)+b(m_2, n)$ for all $m_1, m_2\in M$ and $n\in N$.
        \item $b(m, n_1+n_2)=b(m, n_1)+b(m, n_2)$ for all $m\in M$ and $n_1, n_2\in N$.
        \item $b(mr, n)=b(m, rn)$ for all $r\in R$, $m\in M$, and $n\in N$.
    \end{enumerate}
    The set of all $R$-balanced products from $M\times N$ to $G$ is denoted by $\mathrm{Bal}_R(M, N; G)$, which is an abelian group with respect to pointwise addition:
    \[
        (b_1+b_2)(m, n)=b_1(m, n)+b_2(m, n).
    \]
\end{definition}

\begin{proposition}{Functor $\mathrm{Bal}_R(M, N; -):\mathsf{Ab}\to \mathsf{Ab}$}{}
    For $M$ and $N$ fixed, we can define a functor $\mathrm{Bal}_R(M, N; -):\mathsf{Ab}\to \mathsf{Ab}$ by
    \[
        \begin{tikzcd}[ampersand replacement=\&]
            \mathsf{Ab}\&[-25pt]\&[+30pt]\&[-30pt] \mathsf{Ab}\&[-30pt]\&[-30pt] \\ [-15pt] 
            G \arrow[dd, "f"{name=L, left}] 
            \&[-25pt] \& [+10pt] 
            \& [-30pt]\mathrm{Bal}_R(M, N; G)\arrow[dd, "{f_*}"{name=R}] \&[-30pt]\ni
            \&[-30pt]b\arrow[dd,mapsto]\&[-30pt]\\ [-10pt] 
            \&  \phantom{.}\arrow[r, "{\mathrm{Bal}_R(M, N; -)}", squigarrow]\&\phantom{.}  \&   \\[-10pt] 
            H \& \& \&  \mathrm{Bal}_R(M, N; H)\&[-30pt]\ni
            \&[-30pt]f\circ b
        \end{tikzcd}
        \]  
\end{proposition}

\begin{definition}{Category $\mathsf{Bal}_R(M,N)$}{}
    Let $R$ be a ring, $M$ be a right $R$-module, and $N$ be a left $R$-module. The \textbf{category of $R$-balanced products} from $M$ and $N$, denoted by $\mathsf{Bal}_R(M, N)$, is defined as follows:
    \begin{itemize}
        \item The objects of $\mathsf{Bal}_R(M, N)$ are $R$-balanced products from $M\times N$ to $G$
        \[
        \mathrm{Ob}\left(\mathsf{Bal}_R(M, N)\right) = \left\{
            b:M\times N\to G \midv G\in \mathrm{Ob}(\mathsf{Ab}),\,b\in\mathrm{Bal}_R(M, N; G) 
        \right\}
        \]
        \item The morphisms from $b_1:M\times N\to G_1$ to $b_2:M\times N\to G_2$ are group homomorphisms $f:G_1\to G_2$ such that $f\circ b_1=b_2$.
        \[
            \begin{tikzcd}[ampersand replacement=\&]
                \& G_1 \arrow[dd, "f"] \\
M\times N \arrow[ru, "b_1"] \arrow[rd, "b_2"'] \&                   \\
                \& G_2                
\end{tikzcd}
        \]
    \end{itemize}
\end{definition}

\begin{definition}{Tensor Product of $R$-modules}{}
    The \textbf{tensor product} of $R$-modules $M$ and $N$, denoted by $\otimes :M\times N\to M\otimes_R N$, is the initial object in the category $\mathsf{Bal}_R(M, N)$. The tensor product satisfies the following universal property: for any $R$-module $G$ and any $R$-balanced product $b:M\times N\to G$, there exists a unique group homomorphism $\widetilde{b}:M\otimes_R N\to G$ such that the following diagram commutes
    \begin{center}
        \begin{tikzcd}[ampersand replacement=\&]
            M\times N \arrow[r, "\otimes"] \arrow[rd, "b"']  \& M\otimes_R N \arrow[d, dashed, "\exists !\,\widetilde{b}"] \\[0.3cm]
            \&  G
        \end{tikzcd}
    \end{center}
    The tensor product can be constructed as follows: let $F:=\mathrm{Free}_{\mathsf{Ab}}(M\times N)$ be the free abelian group on $M\times N$, and let $K$ be the subgroup of $F$ generated by elements of the form
    \begin{enumerate}[(i)]
        \item $(m_1+m_2, n)-(m_1, n)-(m_2, n)$,
        \item $(m, n_1+n_2)-(m, n_1)-(m, n_2)$,
        \item $(mr, n)-(m, rn)$.
    \end{enumerate}
    Then the tensor product $\otimes :M\times N\to M\otimes_R N$ can be constructed as the composition
    \[
        \otimes :M\times N\xlongrightarrow{\iota}F \xlongrightarrow{\pi}F/K
    \]
    and $M\otimes_R N:=F/K$.
\end{definition}
\begin{prf}
    To prove the constructed tensor product $F/K$ is the initial object in the category $\mathsf{Bal}_R(M, N)$, we need to check the universal property of tensor product. Let $G$ be an $R$-module and $b:M\times N\to G$ be an $R$-balanced product. 
    \[
        \begin{tikzcd}
            F \arrow[r, "\pi", two heads] \arrow[rd, "\hat{b}", dashed] & F/K \arrow[d, "\tilde{b}", dashed] \\[1.5em]
            M\times N \arrow[u, "\iota", hook] \arrow[r, "b"']          & G                                 
        \end{tikzcd}
    \]
    First by the universal property of free abelian group, there exists a unique group homomorphism
    \begin{align*}
        \hat{b}:F&\longrightarrow G\\
        \sum_{i=1}^k r_i(m_i, n_i)&\longmapsto \sum_{i=1}^k r_ib(m_i, n_i).
    \end{align*}
    such that $\hat{b}\circ\iota=b$. Note that
    \begin{align*}
        \hat{b}\left((m_1+m_2, n)-(m_1, n)-(m_2, n)\right) &= b(m_1+m_2, n)-b(m_1, n)-b(m_2, n)=0,\\
        \hat{b}\left((m, n_1+n_2)-(m, n_1)-(m, n_2)\right) &= b(m, n_1+n_2)-b(m, n_1)-b(m, n_2)=0,\\
        \hat{b}\left((mr, n)-(m, rn)\right) &= b(mr, n)-b(m, rn)=0.
    \end{align*}
    We see for any $k\in K$, $\hat{b}(k)=0$. Thus by the universal property of quotient group, there exists a unique group homomorphism $\tilde{b}:F/K\to G$ such that $\tilde{b}\circ\pi=\hat{b}$. It is easy to check that $\tilde{b}\circ\pi\circ\iota=b$, which means the diagram commutes. 

    To show the uniqueness, assume there exists another group homomorphism $\tilde{b}':F/K\to G$ such that $\tilde{b}'\circ\pi\circ\iota=b$. Since $\hat{b}\circ \iota=b$, by the uniqueness of $\tilde{b}$, we have $\tilde{b}'\circ\pi=\hat{b}$. Then by the uniqueness of $\tilde{b}$, we have $\tilde{b}=\tilde{b}'$. Thus the tensor product $F/K$ is the initial object in the category $\mathsf{Bal}_R(M, N)$.
\end{prf}

\begin{proposition}{Pure Tensors Generate Tensor Product}{pure_tensors_generate_tensor_product}
    Let $R$ be a ring, $M$ be a right $R$-module, and $N$ be a left $R$-module. The elements of the image of the tensor product map $\otimes :M\times N\to M\otimes_R N$
    \[
       \mathrm{im}(\otimes) = \{m\otimes n \mid m\in M, n\in N\}.
    \]
    are called \textbf{pure tensors}.
    \begin{enumerate}[(i)]
        \item $\mathrm{im}(\otimes)$ generates $M\otimes_R N$ as an abelian group:
        \[
            M\otimes_R N = \langle \mathrm{im}(\otimes) \rangle_{\mathsf{Ab}}:=\left\{
                \sum_{i=1}^k m_i\otimes n_i \mid k\in \mathbb{Z}_{\ge 1}, m_i\in M, n_i\in N
            \right\}.
        \]
        \item Let $F:=\mathrm{Free}_{\mathsf{Ab}}(\mathrm{im}(\otimes))$. Then we have
        \[
        M\otimes_R N \cong F/\langle X_M\cup X_N\rangle,
        \]
        where
        \begin{align*}
            X_M&=\left\{[(m+m')\otimes n]-[m\otimes n]-[m'\otimes n]\in F\midv m,m'\in M,n\in N\right\},\\
            X_N&=\left\{[m\otimes(n+n')]-[m\otimes n]-[m\otimes n']\in F\midv m\in M, n,n'\in N\right\}.
        \end{align*}
        \item Let $f:\mathrm{im}(\otimes)\to G$ be a map. If and only if the map
        \begin{align*}
            M \times N &\longrightarrow G \\
            (m,n)&\longmapsto f(m\otimes n)
        \end{align*}
        is $\mathbb{Z}$-bilinear, i.e.
        \begin{align*}
            f\left((m_1+m_2)\otimes n\right)&=f\left(m_1\otimes n\right)+f\left(m_2\otimes n\right),\\
            f\left(m\otimes (n_1+n_2)\right)&=f\left(m\otimes n_1\right)+f\left(m\otimes n_2\right),
        \end{align*}
        there exists a group homomorphism $\tilde{f}:M\otimes_R N\to G$ such that the following diagram commutes
        \[
        \begin{tikzcd}[ampersand replacement=\&]
            \mathrm{im}(\otimes) \arrow[r, "i", hook] \arrow[rd, "f"']  \& M\otimes_R N \arrow[d, dashed, "\tilde{f}"] \\[0.3cm]
            \&  G
        \end{tikzcd}
        \]
        If such $\tilde{f}$ exists, then it is unique and is totally determined by $f$ as follows:
        \begin{align*}
            \tilde{f}:M\otimes_R N&\longrightarrow G\\
            \sum_{i=1}^k m_i\otimes n_i &\longmapsto \sum_{i=1}^k f(m_i\otimes n_i).
        \end{align*}
    \end{enumerate}
\end{proposition}
\begin{prf}
    \begin{enumerate}[(i)]
        \item 
    Let $\mathrm{pr}:M\otimes_R N\to M\otimes_R N/\langle \mathrm{im}(\otimes) \rangle_{\mathsf{Ab}}$ be the canonical projection. Then we have the following commutative diagram
    \[
     \begin{tikzcd}[ampersand replacement=\&]
            M\times N \arrow[r, "\otimes"] \arrow[rd, "0"']  \& M\otimes_R N \arrow[d, "\mathrm{pr}", two heads] \\[2em]
            \&  M\otimes_R N/\langle \mathrm{im}(\otimes) \rangle_{\mathsf{Ab}}
        \end{tikzcd}
    \]
    Note $0= 0\circ \otimes$. By the uniqueness in the universal property of tensor product, we have $\mathrm{pr}=0$. Therefore, $M\otimes_R N=\langle \mathrm{im}(\otimes) \rangle_{\mathsf{Ab}}$.

    \item Define
    \begin{align*}
        j:\mathrm{im}(\otimes)&\longrightarrow  \mathrm{Free}_{\mathsf{Ab}}(\mathrm{im}(\otimes))\\
         m\otimes n &\longmapsto [m\otimes n]
    \end{align*}
    By the universal property of free abelian group, the inclusion $i:\mathrm{im}(\otimes)\hookrightarrow M\otimes_R N $ induces a group homomorphism $\widehat{i}:\mathrm{Free}_{\mathsf{Ab}}(\mathrm{im}(\otimes))\to M\otimes_R N$.
    \[
    \begin{tikzcd}
                &[-1em] \mathrm{im}(\otimes) \arrow[d, "j", hook] \arrow[rd, "f"] \arrow[ld, "i"', hook]                                                                                   &   \\[3em]
    M\otimes_R N & \mathrm{Free}_{\mathsf{Ab}}(\mathrm{im}(\otimes)) \arrow[d, "p", two heads] \arrow[r, "\widehat{f}", dashed] \arrow[l, "\widehat{i}"', dashed]                         & G \\[3em]
                & \mathrm{Free}_{\mathsf{Ab}}(\mathrm{im}(\otimes))/\langle X_M\cup X_N\rangle_{\mathsf{Ab}}. \arrow[ru, "\overline{f}"', dashed] \arrow[lu, "\overline{i}", dashed] &  
    \end{tikzcd}
    \]
    Since 
    \[
    \widehat{i}\left(X_M\right)=\widehat{i}\left(X_N\right)=\{0\}\implies   X_M\cup X_N \subseteq \ker \widehat{i}\implies \langle X_M\cup X_N\rangle_{\mathsf{Ab}}\subseteq \ker \widehat{i}
    \]
    there exists a unique group homomorphism $\overline{i}:\mathrm{Free}_{\mathsf{Ab}}(\mathrm{im}(\otimes))/\langle X_M\cup X_N\rangle_{\mathsf{Ab}}\to M\otimes_R N $ such that $\overline{i}\circ p= \widehat{i}$. Since $\widehat{i}$ is surjective, $\overline{i}$ is also surjective. Define
    \begin{align*}
        \beta:M\times N&\longrightarrow \mathrm{Free}_{\mathsf{Ab}}\left(\mathrm{im}(\otimes)\right)/\langle X_M\cup X_N\rangle_{\mathsf{Ab}}\\
         (m,n)&\longmapsto \overline{\left[m \otimes n\right]}
    \end{align*}
    We can check that $\beta$ is a balanced product
    \begin{align*}
       \beta\left(m_1+m_2,n\right)&=\overline{\left[(m_1+m_2) \otimes n\right]}=\overline{\left[m_1 \otimes n\right]}+\overline{\left[m_2 \otimes n\right]} = \beta\left(m_1,n\right)+\beta\left(m_2,n\right),\\
       \beta\left(m, n_1+n_2\right)&= \overline{\left[m \otimes \left(n_1+n_2\right)\right]}= \overline{\left[m \otimes n_1\right]}+\overline{\left[m \otimes n_2\right]}=\beta\left(m, n_1\right)+\beta\left(m, n_2\right),
       \\
       \beta\left(mr, n\right)&= \overline{\left[(mr) \otimes n\right]}= \overline{\left[m \otimes (rn)\right]}=\beta\left(m, rn\right).
    \end{align*}
    By the universal property of tensor product $M \otimes_R N$, there exists a unique group homomorphism
    \begin{align*}
        \varphi:M\otimes_R N&\longrightarrow \mathrm{Free}_{\mathsf{Ab}}(\mathrm{im}(\otimes))/\langle X_M\cup X_N\rangle,\\
         m\otimes n &\longmapsto \overline{[m\otimes n]}.
    \end{align*}
    such that $\varphi\circ \otimes=\beta$. Note 
    \begin{align*}
    \varphi\circ \overline{i}\left(\overline{[m_1\otimes n_1]+\cdots [m_k\otimes n_k]}\right)&=\varphi\circ \overline{i}\circ p\left([m_1\otimes n_1]+\cdots [m_k\otimes n_k]\right)\\
    &=\varphi\circ \widehat{i}\left([m_1\otimes n_1]+\cdots [m_k\otimes n_k]\right)\\
    &=\varphi\left(m_1\otimes n_1\right)+\cdots +\varphi\left(m_k\otimes n_k\right)\\
    &=\overline{[m_1\otimes n_1]}+\cdots +\overline{[m_k\otimes n_k]}\\
    &=\overline{[m_1\otimes n_1]+\cdots +[m_k\otimes n_k]}.
    \end{align*}
    We have $\varphi\circ \overline{i}=\mathrm{id}$, which implies that $\overline{i}$ is injective. Therefore, $\overline{i}$ is an isomorphism.
    \item If there exists a group homomorphism $\tilde{f}:M\otimes_R N\to G$ such that $f=\tilde{f}\circ i$, then we can check that the map $(m,n)\mapsto f(m\otimes n)$ is $\mathbb{Z}$-bilinear:
    \begin{align*}
        f\left((m_1+m_2)\otimes n\right)&=\tilde{f}\left(i\left((m_1+m_2)\otimes n\right)\right)=\tilde{f}\left(m_1\otimes n+m_2\otimes n\right)=f\left(m_1\otimes n\right)+f\left(m_2\otimes n\right),\\
        f\left(m\otimes (n_1+n_2)\right)&=\tilde{f}\left(i\left(m\otimes (n_1+n_2)\right)\right)=\tilde{f}\left(m\otimes n_1+m\otimes n_2\right)=f\left(m\otimes n_1\right)+f\left(m\otimes n_2\right).
    \end{align*}
    Conversely, if the map $(m,n)\mapsto f(m\otimes n)$ is $\mathbb{Z}$-bilinear, then we have
    \begin{align*}
        \widehat{f}\left([(m+m')\otimes n]-[m\otimes n]-[m'\otimes n]\right)&=\widehat{f}\left([(m+m')\otimes n]\right)-\widehat{f}\left([m\otimes n]\right)-\widehat{f}\left([m'\otimes n]\right)\\
        &=f\left((m+m')\otimes n\right)-f\left(m\otimes n\right)-f\left(m'\otimes n\right)=0,\\
        \widehat{f}\left([m\otimes(n+n')]-[m\otimes n]-[m\otimes n']\right)&=\widehat{f}\left([m\otimes(n+n')]\right)-\widehat{f}\left([m\otimes n]\right)-\widehat{f}\left([m\otimes n']\right)\\
        &=f\left(m\otimes(n+n')\right)-f\left(m\otimes n\right)-f\left(m\otimes n'\right)=0,
    \end{align*}
    which implies
    \[
    \widehat{f}\left(X_M\right)=\widehat{f}\left(X_N\right)=\{0\}\implies X_M\cup X_N \subseteq \ker \widehat{f}\implies \langle X_M\cup X_N\rangle_{\mathsf{Ab}}\subseteq \ker \widehat{f}.
    \]
    Thus by the universal property of quotient group, there exists a unique group homomorphism 
    \begin{align*}
        \overline{f}: \mathrm{Free}_{\mathsf{Ab}}(\mathrm{im}(\otimes))/\langle X_M\cup X_N\rangle_{\mathsf{Ab}}&\longrightarrow G\\
        \overline{[m\otimes n]}&\longmapsto f(m\otimes n)
    \end{align*}
    such that $\overline{f}\circ p=\widehat{f}$. Composing $\overline{f}$ with the isomorphism $\varphi:M\otimes_R N\to \mathrm{Free}_{\mathsf{Ab}}(\mathrm{im}(\otimes))/\langle X_M\cup X_N\rangle$ in (ii), we obtain a group homomorphism
    \begin{align*}
        \tilde{f}:M\otimes_R N&\longrightarrow G\\
        m\otimes n &\longmapsto f(m\otimes n).
    \end{align*}
    \end{enumerate}
\end{prf}

\begin{proposition}{}{}
    Let $Q$, $R$, and $S$ be commutative rings, $M$ be a $(Q,R)$-bimodule, and $N$ be a $(R,S)$-bimodule. Then $M\otimes_R N$ has a natural $(Q,S)$-bimodule structure given by
    \[
        q\cdot (m\otimes n):=(q\cdot m)\otimes n,\quad (m\otimes n)\cdot s:=m\otimes (n\cdot s)
    \]
    for all $q\in Q$, $s\in S$, $m\in M$, and $n\in N$.
\end{proposition}

\begin{example}{Base Change Functor}{}
    Let $\varphi:R\to S$ be a ring homomorphism. The \textbf{base change functor} $-\otimes_R S:R\text{-}\mathsf{Mod}\to S\text{-}\mathsf{Mod}$ is defined as follows:
    \[
        \begin{tikzcd}[ampersand replacement=\&]
            R\text{-}\mathsf{Mod} \&[-25pt]\&[+30pt]\&[-30pt] S\text{-}\mathsf{Mod}\&[-30pt]\&[-30pt] \\ [-15pt] 
            M \arrow[dd, "f"{name=L, left}] 
            \&[-25pt] \& [+10pt] 
            \& [-30pt]M\otimes_R S\arrow[dd, "f\otimes_R \mathrm{id}_{S}"{name=R}] \&[-30pt]\\ [-10pt] 
            \&  \phantom{.}\arrow[r, "-\otimes_R S", squigarrow]\&\phantom{.}  \&   \\[-10pt] 
            N \& \& \&  N\otimes_R S\&
        \end{tikzcd}
        \]
    where the $S$-module structure on $M\otimes_R S$ is given by
    \[
        s'\cdot (m\otimes s):=m\otimes (s's)
    \]
    for all $s', s\in S$ and $m\in M$.
\end{example}

\begin{proposition}{Tensoring with the Base Ring}{tensoring_with_base_ring}
    Let $R$ be a ring and $M$ be a left $R$-module. Then there is a natural isomorphism of $R$-modules
    \begin{align*}
        \lambda_M: R\otimes_R M &\overset{\sim}{\longrightarrow} M\\
        r\otimes m &\longmapsto r\cdot m
    \end{align*}
\end{proposition}
\begin{prf}
    Define the map
    \begin{align*}
        \rho_M: M &\longrightarrow R\otimes_R M\\
        m &\longmapsto 1_R\otimes m.
    \end{align*}
    $\rho_M$ is an $R$-linear map since for any $r\in R$ and $m, n\in M$, 
    \[
    \rho_M(rm)=1_R\otimes (rm) = r\otimes m = r\cdot (1_R\otimes m) = r\cdot \rho_M(m).
    \]
\end{prf}

\subsection{Localization}

\begin{proposition}{}{equivalence_of_S_inverse_R_modules_and_R_modules_where_S_act_as_automorphisms}
    Let $R$ be a commutative ring and $S \subseteq R$ be a multiplicative subset. The category of $S^{-1} R$ modules is equivalent to the category of $R$-modules $M$ with the property that every $s \in S$ acts as an automorphism on $M$. The following functor $F$ gives a equivalence of categories: 
    \[
        \begin{tikzcd}[ampersand replacement=\&]
            S^{-1} R\text{-}\mathsf{Mod}\&[-25pt]\&[+10pt]\&[-30pt] R\text{-}\mathsf{Mod}\text{ where }S\text{ act as automorphisms}\&[-30pt]\&[-30pt] \\ [-15pt] 
            M  \arrow[dd, "f"{name=L, left}] 
            \&[-25pt] \& [+10pt] 
            \& [-30pt] M\arrow[dd, "f"{name=R}] \&[-30pt]\\ [-10pt] 
            \&  \phantom{.}\arrow[r, "F", squigarrow]\&\phantom{.}  \&   \\[-10pt] 
            N \& \& \&  N\&
        \end{tikzcd}
        \]
\end{proposition}

\begin{prf}
    Assume $S$ is a multiplicative subset of communitative ring $R$ and the localization map is $\varphi:R\to S^{-1}R$. Then $R$ can acts on $S^{-1}R$-module $M$ through 
    \[
        R\xrightarrow{\varphi}S^{-1}R\xrightarrow{\sigma_M'}\mathrm{End}_{\mathsf{Ab}}(M),
    \]
    which enables us to regard $M$ as an $R$-module. Furthermore, since 
    \[
        \sigma_M'(\varphi(S))\subseteq \sigma_M' \left(\left(S^{-1}R\right)^\times\right)\subseteq \left(\mathrm{End}_{\mathsf{Ab}}(M)\right)^\times=\mathrm{Aut}_{\mathsf{Ab}}(M),
    \]
    every $s \in S$ acts as an automorphism on $M$.\\
    Conversely, if $M$ is an $R$-module such that every $s\in S$ acts as an automorphism on $M$, i.e. $\sigma_M:R\to\mathrm{End}_{\mathsf{Ab}}(M)$ satisfies $\sigma_M(S)\subseteq \mathrm{Aut}_{\mathsf{Ab}}(M)$, then by unversal property
    \begin{center}
        \begin{tikzcd}[ampersand replacement=\&]
         
            S^{-1}R\arrow[rr, "\sigma_M'", dashed]\&\& \mathrm{End}_{\mathsf{Ab}}(M) \&  \\             
            \&R \arrow[ru, "\sigma_M"'] \arrow[lu, "\varphi"] \&                          
        \end{tikzcd}
    \end{center}
    we can define a $S^{-1}R$-module structure on $M$ by lifting $\sigma_M$ to $\sigma_M'$. It is easy to check that these two functors are quasi-inverse to each other.
\end{prf}


\begin{definition}{Localization of a Module}{localization_of_module}
    Let $R$ be a commutative ring, $S$ be a multiplicative set in $R$, and $M$ be an $R$-module. The \textbf{localization of the module} $M$ by $S$, denoted $S^{-1}M$, is an $S^{-1}R$-module that is constructed exactly as the localization of $R$, except that the numerators of the fractions belong to $M$. That is, as a set, it consists of equivalence classes, denoted $\frac{m}{s}$, of pairs $(m, s)$, where $m\in M$ and $s\in S$, and two pairs $(m, s)$ and $(n, t)$ are equivalent if there is an element $u\in S$ such that
    \[u(sn-tm)=0.\]
    Addition and scalar multiplication are defined as for usual fractions (in the following formula, $r\in R$, $s,t\in S$, and $m,n\in M$):
    \[\frac{m}{s} + \frac{n}{t} = \frac{tm+sn}{st},\]
    \[\frac{r}{s} \frac{m}{t} = \frac{r m}{st}.\]
\end{definition}



\begin{proposition}{Universal Property of Localization}{universal_property_of_localization}
    Let $R$ be a commutative ring and $S\subseteq R$ be a multiplicative subset, an $M$ be an $R$-module. The $R$-linear map
    \begin{align*}
        l_S:M&\longrightarrow S^{-1}M\\
         m&\longmapsto \frac{m}{1}
    \end{align*}
    satisfies the any of following universal properties: 
    \begin{itemize}
        \item for any $R$-linear map $\psi:M\to N$ such that $S$ act as automorphisms on $N$ (i.e. the induced ring homomorphism $\sigma_{N}:R\to\mathrm{End}_{\mathsf{Ab}}(N)$ satisfies $\sigma_{N}(S)\subseteq \mathrm{Aut}_{\mathsf{Ab}}(N)$), there exists a unique $R$-linear map
        \begin{align*}
            \psi':S^{-1}M&\longrightarrow N\\
            \frac{m}{s}&\longmapsto \sigma_{N}(s)^{-1}(\psi(m))
        \end{align*}
        such that the following diagram commutes in $R\text{-}\mathsf{Mod}$
        \begin{center}
            \begin{tikzcd}[ampersand replacement=\&]
             
                S^{-1}M\arrow[rr, "\psi'", dashed]\&\& N \&  \\             
                \&M \arrow[ru, "\psi"'] \arrow[lu, "l_S"] \&                          
            \end{tikzcd}
        \end{center}
        \item for any $S^{-1}R$-module $N$ and $R$-linear map $\psi:M\to \mathrm{Res}(N)$, there exists a unique $S^{-1}R$-linear map $\psi':S^{-1}M\to N$ such that the following diagram commutes in $R\text{-}\mathsf{Mod}$
        \begin{center}
            \begin{tikzcd}[ampersand replacement=\&]
             
                \mathrm{Res}(S^{-1}M)\arrow[rr, "\mathrm{Res}(\psi')", dashed]\&\& \mathrm{Res}(N) \&  \\             
                \&M \arrow[ru, "\psi"'] \arrow[lu, "l_S"] \&                          
            \end{tikzcd}
        \end{center}
    \end{itemize}
    We have two equivalent universal properties because of the equivalence of categories in \Cref{th:equivalence_of_S_inverse_R_modules_and_R_modules_where_S_act_as_automorphisms}.
\end{proposition}


\begin{proposition}{Kernel of Localization Map}{kernel_of_localization_map}
    Let $R$ be a commutative ring, $S$ be a multiplicative set in $R$, and $M$ be an $R$-module. Suppose
    \begin{align*}
        l_S:M&\longrightarrow S^{-1}M\\
         m&\longmapsto \frac{m}{1}
    \end{align*}
    is the localization map. Then
    \[
    \ker l_S=\left\{m\in M \midv \exists s\in S,\; sm=0\right\}.
    \]
\end{proposition}
\begin{prf}
    If $m\in \ker l_S$, then we have $\frac{m}{1}=\frac{0}{1}$ in $S^{-1}M$. By the definition of \hyperref[th:localization_of_module]{localization}, there exists $s\in S$ such that 
    \[
    s(1\cdot 0-1\cdot m)=-sm=0.
    \]
    Thus we have 
    \[
        \ker l_S\subseteq \left\{m\in M \midv \exists s\in S,\; sm=0\right\}.
    \]
    Conversely, if $m\in M$ such that there exists $s\in S$ with $sm=0$, then we have
    \[
        l_S(m)=\frac{m}{1}=\frac{sm}{s}=\frac{0}{s}=\frac{0}{1},
    \]
    which means $m\in \ker l_S$. Thus we have 
    \[
        \left\{m\in M \midv \exists s\in S,\; sm=0\right\}\subseteq \ker l_S.
    \]
    Therefore, we conclude that 
    \[
        \ker l_S=\left\{m\in M \midv \exists s\in S,\; sm=0\right\}.
    \]
\end{prf}

\begin{proposition}{Localization is a Left Adjoint Functor}{localization_is_a_left_adjoint_functor}
    Let $R$ be a commutative ring, $S$ be a multiplicative set in $R$, and $M$ be an $R$-module. Define the localization functor as follows
    \[
        \begin{tikzcd}[ampersand replacement=\&]
           R\text{-}\mathsf{Mod}\&[-25pt]\&[+10pt]\&[-30pt] S^{-1}R\text{-}\mathsf{Mod}\&[-30pt]\&[-30pt] \\ [-15pt] 
            M  \arrow[dd, "f"{name=L, left}] 
            \&[-25pt] \& [+10pt] 
            \& [-30pt] S^{-1}M\arrow[dd, "S^{-1}(f)"{name=R}] \&[-30pt]\ni
            \&[-30pt]\frac{m}{s}\arrow[dd,mapsto]\&[-30pt]\\ [-10pt] 
            \&  \phantom{.}\arrow[r, "S^{-1}", squigarrow]\&\phantom{.}  \&   \\[-10pt] 
            N \& \& \&  S^{-1}N\&[-30pt]\ni
            \&[-30pt]\frac{f(m)}{s}
        \end{tikzcd}
        \]  
        where $S^{-1}(f)$ is defiend as the composition $S^{-1}M\xrightarrow{f'} N\to S^{-1}N$. \\
        Let $\mathrm{Res}_{R\to S^{-1}R}: S^{-1}R\text{-}\mathsf{Mod}\to R\text{-}\mathsf{Mod}$ be the functor that regards $S^{-1}R$-modules as $R$-modules. Then we have a pair of adjoint functors    
        \[
            \begin{tikzcd}[ampersand replacement=\&]
                R\text{-}\mathsf{Mod} \arrow[r, "S^{-1}"{name=U}, bend left, start anchor=east, yshift=1.7ex, end anchor=west] \&[+12pt] 
                S^{-1}R\text{-}\mathsf{Mod} \arrow[l, "{\mathrm{Res}}"{name=D, anchor=north}, bend left, start anchor=west, yshift=-1.5ex, end anchor=east]
                \arrow[phantom, from=U, to=D, "\dashv"{rotate=-90}]
            \end{tikzcd}    
        \]
         and natural isomorphism
        \[
        \mathrm{Hom}_{S^{-1}R\text{-}\mathsf{Mod}}(S^{-1}M, N)\cong \mathrm{Hom}_{R\text{-}\mathsf{Mod}}(M, \mathrm{Res}_{R\to S^{-1}R}(N)).    
        \]
\end{proposition}

\begin{proposition}{Localization is an Exact Functor}{}
    Let $R$ be a commutative ring, $S$ be a multiplicative set in $R$. If 
    \[
        L\xlongrightarrow {u} M\xlongrightarrow {v} N    
    \]
    is an exact sequence of $R$-module, then 
    \[
        S^{-1}L\xlongrightarrow {S^{-1}(u)} S^{-1}M\xlongrightarrow {S^{-1}(v)} S^{-1}N
    \]
    is an exact sequence of $S^{-1}R$-module.
\end{proposition}

\begin{prf}
    Suppose $\frac{m}{s}\in \ker S^{-1}(v) $. Then we have
    \[
        S^{-1}(v)\left(\frac{m}{s}\right)=\frac{v(m)}{s}=\frac{0}{1},
    \]
    which imples that there exists $t\in S$ such that $tv(m)=v(tm)=0$. Thus we have $tm\in \ker v$. By exactness, there exists $l\in L$ such that $u(l)=tm$. Since 
    \[
        S^{-1}(u)\left(\frac{l}{ts}\right)=\frac{u(l)}{ts}=\frac{tm}{ts}=\frac{m}{s},
    \]
    we see that $\frac{m}{s}\in \operatorname{im}S^{-1}(u)$, which means $\operatorname{im}S^{-1}(u)=\ker S^{-1}(v)$. Hence $S^{-1}$ is exact.
\end{prf}

\begin{proposition}{Localization of Module as Tensor Product}{localization_of_module_as_tensor_product}
    Let \(R\) be a ring, \(S \subseteq R\) a multiplicative subset. The localization functor $S^{-1}:R\text{-}\mathsf{Mod}\to S^{-1}R\text{-}\mathsf{Mod}$ is isomorphic to the tensor product functor $ S^{-1}R \otimes_R -$. And we have isomorphisms
    \begin{align*}
        \theta_M : S^{-1}R \otimes _ R M &\overset{\sim}{\longrightarrow} S^{-1}M\\
        \frac{a}{s} \otimes m &\longmapsto \frac{am}{s}
    \end{align*}
    naturally for all $R$-modules $M$.
\end{proposition}
\begin{prf}
\noindent\textbf{Step 1. Constructing the Isomorphism \(\theta_M\)}\\
\noindent Define the map
\begin{align*}
    b_M: S^{-1}R \times M &\longrightarrow S^{-1}M\\
    \left(\frac{a}{s}, m\right) &\longmapsto \frac{am}{s}.
\end{align*}
This map is well-defined because for any \(\frac{a}{s} = \frac{a'}{s'}\), there exists \(u \in S\) such that \(u(s'a - sa') = 0\), so that 
\[
u(s'(am) - s(a'm))=u(s'a - sa')m =0\implies \frac{am}{s} = \frac{a'm}{s'}.
\]
It is straightforward to check that \(b_M\) is an \(R\)-balanced product. By the \hyperlink{th:universal_property_of_localization}{universal property of the tensor product}, there exists a unique \(R\)-linear map
\begin{align*}
    \theta_M: S^{-1}R\otimes_R M &\longrightarrow S^{-1}M\\
    \frac{a}{s} \otimes m &\longmapsto \frac{am}{s}\qquad(a \in A, s \in S, m \in M).
\end{align*}
such that the following diagram commutes
\[
    \begin{tikzcd}
        S^{-1}R\otimes_R M \arrow[rr, "\theta_M", dashed] &                                                          & S^{-1}M \\[1.5em]
                                                        & S^{-1}R\times M \arrow[ru, "b_M"'] \arrow[lu, "\otimes"] &        
        \end{tikzcd}
\]

\vspace{1em}
\noindent\textbf{Step 2. Constructing the Inverse}\\
\noindent Define the $R$-linear map 
\begin{align*}
    1\otimes -: M &\longrightarrow S^{-1}R \otimes_R M\\
    m &\longmapsto 1_{S^{-1}R} \otimes m.
\end{align*}
Through the universal property of localization, we obtain a unique \(S^{-1}R\)-linear map
\begin{align*}
    \psi_M: S^{-1}M &\longrightarrow S^{-1}R \otimes_R M\\
    \frac{m}{s} &\longmapsto \frac{1}{s} \otimes m.
\end{align*}
such that the following diagram commutes
\[
    \begin{tikzcd}
        S^{-1}M \arrow[rr, "\psi_M", dashed] &                                          & S^{-1}R\otimes_R M \\
                                             & M \arrow[lu, "l"] \arrow[ru, "1\otimes -"'] &                   
        \end{tikzcd}
\]
We can verify that \(\theta_M\) and \(\psi_M\) are Inverses:
\begin{itemize}
    \item Composition \(\theta_M \circ \psi_M\): For any \(\frac{m}{s} \in S^{-1}M\),
    \[
    (\theta_M \circ \psi_M)\left(\frac{m}{s}\right) = \theta_M\left(\frac{1}{s} \otimes m\right) = \frac{1\cdot m}{s} = \frac{m}{s}.
    \]
    \item Composition \(\psi_M \circ \theta_M\): For any \(\frac{a}{s} \otimes m \in S^{-1}R \otimes_R M\), by \(R\)-linearity of the tensor product, we have
    \[
    (\psi_M \circ \theta_M)\Big(\frac{a}{s} \otimes m\Big) = \psi_M\left(\frac{am}{s}\right) = \frac{1}{s} \otimes am= \frac{a}{s} \otimes m.
    \]
\end{itemize}
\vspace{1em}
\noindent\textbf{Step 3. Naturality}\\
\noindent Let \(f: M \to N\) be a morphism of \(R\)-modules. We need to show that the following diagram commutes:
\[
\begin{tikzcd}[column sep=large, row sep=large]
S^{-1}R \otimes_R M \arrow[r, "\mathrm{id}\otimes f"] \arrow[d, "\theta_M"']
  & S^{-1}R \otimes_R N \arrow[d, "\theta_N"] \\
 S^{-1}M \arrow[r, "S^{-1}f"']
  & S^{-1}N
\end{tikzcd}
\]
For any \(\frac{a}{s} \otimes m \in S^{-1}R \otimes_R M\), we have
\[
\phi_N\Big((1\otimes f)\Big(\frac{a}{s} \otimes m\Big)\Big) = \phi_N\Big(\frac{a}{s} \otimes f(m)\Big) = \frac{af(m)}{s},
\]
and
\[
(S^{-1}f)\Big(\theta_M\Big(\frac{a}{s} \otimes m\Big)\Big) = (S^{-1}f)\Big(\frac{am}{s}\Big) = \frac{af(m)}{s}.
\]
Thus, the diagram commutes, and the isomorphism is natural.

\vspace{1em}
\noindent\textbf{Conclusion}\\
\noindent We have constructed a natural isomorphism
\[
\theta_M: S^{-1}R \otimes_R M \xrightarrow{\sim} S^{-1}M,
\]
which establishes that the functors
\[
S^{-1}(-) \quad \text{and} \quad S^{-1}A\otimes_A(-)
\]
are isomorphic.
\end{prf}


\begin{proposition}{Localization Respects Quotients}{localization_respects_quotients}
    Let $M$ be an $R$-module and $N$ be a submodule of $M$. Then we have an isomorphism 
    \[
    S^{-1}(M/N)\cong (S^{-1}M)/(S^{-1}N)
    \]
    and the following commutative diagram
    \[
        \begin{tikzcd}
            M \arrow[r, "\pi_M"] \arrow[d, "S^{-1}"'] &[+5em] M/N \arrow[d, "S^{-1}"]              \\[+2em]
            S^{-1}M \arrow[r, "\pi_{S^{-1}N}"']       & S^{-1}(M/N)\cong (S^{-1}M)/(S^{-1}N)
            \end{tikzcd}
    \]
\end{proposition}

\begin{prf}
    Since localization is exact, from the exact sequence
    \[
        0\longrightarrow N\longrightarrow M\longrightarrow M/N\longrightarrow 0,
    \]
    we obtain the following exact sequence
    \[
        0\longrightarrow S^{-1}N\longrightarrow S^{-1}M\longrightarrow S^{-1}(M/N)\longrightarrow 0.
    \]
\end{prf}


\begin{proposition}{Localization Commutes with Tensor Product}{localization_commutes_with_tensor_product}
    Let $R$ be a commutative ring, $S$ be a multiplicative set in $R$, and $M,N$ be $R$-modules. Then we have an isomorphism
    \begin{align*}
        f : S^{-1}M \otimes _{S^{-1}R}S^{-1}N &\overset{\sim}{\longrightarrow} S^{-1}(M \otimes _ R N)\\
        \frac{m}{s} \otimes \frac{n}{t} &\longmapsto \frac{m \otimes n}{st}
    \end{align*}
\end{proposition}
\begin{proof}
    \begin{align*} 
         S^{-1}(M \otimes _ R N) &  \cong S^{-1}R \otimes _ R (M \otimes _ R N) &(\text{by \Cref{th:localization_of_module_as_tensor_product}})\\ 
         &\cong (S^{-1}R \otimes _ R M) \otimes _ R N &(\text{by associativity of tensor product})\\
         &  \cong S^{-1}M \otimes _ R N &(\text{by \Cref{th:localization_of_module_as_tensor_product}})\\
          &  \cong (S^{-1}M \otimes _{S^{-1}R}S^{-1}R)\otimes _ R N&(\text{by \Cref{th:tensoring_with_base_ring}})\\
          &  \cong S^{-1}M \otimes _{S^{-1}R}(S^{-1}R \otimes _ R N) &(\text{by associativity of tensor product})\\
          &  \cong S^{-1}M \otimes _{S^{-1}R}S^{-1}N &(\text{by \Cref{th:localization_of_module_as_tensor_product}})
    \end{align*}
\end{proof}

\begin{proposition}{Localization as Colimit}{}
    Let $R$ be a commutative ring, $S$ be a multiplicative set in $R$, and $M$ be an $R$-module. Then we have an isomorphism
    \[
        S^{-1}M\cong \varinjlim_{f\in S}M_f,
    \]
    where $M_f$ is the localization of $M$ by the multiplicative set $\langle f\rangle=\{f^n\mid n\in \mathbb{Z}_{\ge0}\}$. 
    
    Formally, $S$ can be endowed with a preorder relation: $f\mid g$ if and only if $fh=g$ for some $h\in S$, which makes $S$ a \hyperref[thin_category]{thin category} $\mathsf{S}$. Then we can define a functor $M_{\text{\textbf{-}}}:\mathsf{S}\to R\text{-}\mathsf{Mod}$
    \[
        \begin{tikzcd}[ampersand replacement=\&]
            \mathsf{S}\&[-25pt]\&[+10pt]\&[-30pt] R\text{-}\mathsf{Mod}\&[-30pt]\&[-30pt] \\ [-15pt] 
            f  \arrow[dd, ""{name=L, left}] 
            \&[-25pt] \& [+10pt] 
            \& [-30pt]M_f\arrow[dd, "l_g'"{name=R}] \&[-30pt]\ni
            \&[-30pt]\frac{m}{f^n}\arrow[dd,mapsto]\&[-30pt]\\ [-10pt] 
            \&  \phantom{.}\arrow[r, "G", squigarrow]\&\phantom{.}  \&   \\[-10pt] 
            g \&\hspace{-3pt}=fh \& \&  M_g\&[-30pt]\ni
            \&[-30pt]\frac{mh^n}{g^n}
        \end{tikzcd}
        \]  
        where $l_g'$ is given by the following  universal property
        \begin{center}
            \begin{tikzcd}[ampersand replacement=\&]
             
                M_f\arrow[rr, "l_g'", dashed]\&\& M_g \&  \\             
                \&M \arrow[ru, "l_g"'] \arrow[lu, "l_f"] \&                          
            \end{tikzcd}
        \end{center}
        And we have
        \[
            S^{-1}M\cong \varinjlim M_{\text{\textbf{-}}}
        \]
\end{proposition}

\begin{prf}
First let's show that the $l'_g$ induced by universal property can be writen as $l'_g:\frac{m}{f^n}\mapsto\frac{mh^n}{g^n}$. Suppose $R$ acts on $M_g$ through
\[
    \sigma_{M_g}:R\xrightarrow{}S^{-1}_gR\xrightarrow{\sigma_{M_g'}}\mathrm{End}_{\mathsf{Ab}}(M_g),
\]
Then we can check for any $f^n \in S_f$,
\[
    \sigma_{M_g}(f^n)\sigma_{M_g'}\left(\frac{h^n}{g^n}\right)=\sigma_{M_g'}\left(\frac{f^nh^n}{g^n}\right)=\sigma_{M_g'}\left(1\right)=1\implies \sigma_{M_g}(f^n)\in \mathrm{Aut}_{\mathsf{Ab}}(M_g),
\]
which means $\sigma_{M_g}(S_f)\subseteq  \mathrm{Aut}_{\mathsf{Ab}}(M_g)$. Thus by universal property of $M_f$, we have
\[
    l'_g\left(\frac{m}{f^n}\right)=\sigma_{M_g}(f^n)^{-1}(m)=\sigma_{M_g'}\left(\frac{h^n}{g^n}\right)(m)=\frac{mh^n}{g^n}.
\]
In a similar way, we can check that $S_f$ can act on $S^{-1}M$ as automorphisms and induce $\psi_f$ by the following universal property
\begin{center}
    \begin{tikzcd}[ampersand replacement=\&]
     
        M_f\arrow[rr, "\psi_f", dashed]\&\& S^{-1}M\&  \\             
        \&M \arrow[ru, "l_S"'] \arrow[lu, "l_f"] \&                          
    \end{tikzcd}
\end{center}
And we are going to show that $\left(\psi_f:M_f\to S^{-1}M\right)_{f\in S}$ is the colimit of $G$. 
\[
\begin{tikzcd}[ampersand replacement=\&]
        \& N                                 \&                                                             \\[+15pt]
        \& S^{-1}M \arrow[u, "\nu"', dashed] \&                                                             \\[+10pt]
M_f \arrow[rr, "l_g'"] \arrow[ru, "\psi_f"] \arrow[ruu, "\mu_f", bend left] \&                                   \& M_g \arrow[lu, "\psi_g"'] \arrow[luu, "\mu_g"', bend right]
\end{tikzcd}
\]
We can prove
\[
   \psi_f=\psi_g\circ l_g'
\]
by checking
\[
    \left(\psi_g\circ l_g'\right)\circ l_f=\psi_g\circ l_g =l_S=\psi_f\circ l_f
\]
and utilizing the uniqueness of the universal property. \\
Given any $\left(\mu_f:M_f\to S^{-1}M\right)_{f\in S}$ such that $\mu_f=\mu_g\circ l_g'$, note that $\mu_f\circ l_f=\mu_f\circ \mu_g\circ l_g'=\mu_g\circ l_g$. Thus we can define $\nu$ to be the unique map such that $\nu\circ l_S=\mu_f\circ l_f$.
\[
\begin{tikzcd}[ampersand replacement=\&]
    \& N                                                  \&                                    \\[+12pt]
M_f \arrow[rr, "\psi_f"] \arrow[ru, "\mu_f"] \&                                                    \& S^{-1}M \arrow[lu, "\nu"', dashed] \\[+12pt]
    \& M \arrow[lu, "l_f"] \arrow[ru, "l_S"'] \&                                   
\end{tikzcd}
\]
Hence we have 
\[
\left(\nu\circ \psi_f\right)\circ l_f=\nu\circ l_S =\mu_f\circ l_f.
\]
By the uniqueness of the universal property of $M_f$, we have $\mu_f=\nu\circ \psi_f$. If there exists another $\nu'$ such that $\mu_f=\nu'\circ \psi_f$, there must be $\nu'\circ l_S=\nu'\circ \psi_f \circ l_f=\mu_f \circ l_f=\nu\circ l_S$. The uniqueness of such $\nu$ forces $\nu=\nu'$.\\
Therefore we show that $ S^{-1}M\cong \varinjlim_{f\in S}M_f$.
\end{prf}

\begin{proposition}{}{associative_localization}
    Suppose $R$ is a commutative ring, $S,S'$ are multiplicative sets in $R$, and $M$ is an $R$-module. View $S^{\prime-1} M$ as an $R$-module, then $S^{-1}\left(S^{\prime-1} M\right)$ is isomorphic to $\left(S S^{\prime}\right)^{-1} M$ as $R$-modules.
\end{proposition}

\begin{prf}
    Define 
    $$
    \begin{aligned}
     f: S^{-1}\left(S^{\prime-1} M\right) &\longrightarrow\left(S S^{\prime}\right)^{-1} M\\
     \quad \frac{x / s^{\prime}}{s} &\longmapsto\frac{x}{ss'} 
    \end{aligned}
    $$
    To show that $f$ is well-defined, suppose that $\frac{x/s^{\prime}}{s}=\frac{y/t^{\prime}}{t}$, which means there exists $v\in S$ such that 
    \[
        v\left(t\frac{x}{s'} - s\frac{y}{t'}\right)=\frac{vtx}{s'}-\frac{vsy}{t'}=0.
    \]
    This further implies that there exists $w\in S'$ such that $w(vtt'x-vss'y)=0$.
     Then we see there exists $vw\in S S^{\prime}$ such that $vw(tt'x-ss'y)=0$, which means $\frac{x}{ss'}=\frac{y}{tt'}$. Thus $f$ is well-defined.

    Define
     \[
    \begin{aligned}
     g:\left(S S^{\prime}\right)^{-1} M& \longrightarrow S^{-1}\left(S^{\prime-1} M\right)\\
      \frac{x}{ss'} &\longmapsto \frac{x / s^{\prime}}{s} \text { for some } s \in S, s^{\prime} \in S^{\prime}
    \end{aligned}
    \]
    and we can check that $g$ is well-defined in a similar way. It is clear that $f$ and $g$ are linear maps inverse to each other.
\end{prf}



\begin{proposition}{}{module_localization_glueing_property}
    Let $R$ be a commutative ring and $M$ be an $R$-module. Suppose $x\in M$. Then the following are equivalent:
    \begin{enumerate}[(i)]
        \item $x=0$.
        \item $x$ maps to $0$ in $M_{\mathfrak{p}}$ for all $\mathfrak{p}\in \spec{R}$. 
        \item $x$ maps to $0$ in $M_{\mathfrak{m}}$ for all $\mathfrak{m}\in \mathrm{Max}\left(R\right)$. 
    \end{enumerate}
    As a consequence, $M\to \prod\limits_{\mathfrak{p}\in \spec{R}}M_{\mathfrak{p}}$ is an injective ring homomorphism.
\end{proposition}

\begin{prf}
    (i)$\implies$(ii) and (ii)$\implies$(iii) are clear. It is left to show (iii)$\implies$(i). Let $x\in M$ and 
    \[
        \mathrm{Ann}_M\left(x\right)=\left\{r\in R\midv rx=0\right\} 
    \] 
    be the annihilator of $x$ in $R$, which is an ideal of $R$. Note $\frac{x}{1}=\frac{0}{1}$ in $M_{\mathfrak{m}}$ if and only if 
    \[
        \mathrm{Ann}_M -\mathfrak{m}=\left\{r\in R-\mathfrak{m}\midv rx=0\right\}\neq \varnothing\iff \mathrm{Ann}_M \subsetneq \mathfrak{m}.
    \]
    If $x$ maps to $0$ in $M_{\mathfrak{m}}$ for all $\mathfrak{m}\in \mathrm{Max}\left(R\right)$, then $\mathrm{Ann}_M$ is not contained in any maximal ideal of $R$, which means $\mathrm{Ann}_M(x)=R$. Hence $x=0$.
\end{prf}

\begin{corollary}{}{module_localization_glueing_property_cor}
    Given an $R$-module $M$, the following are equivalent:
    \begin{enumerate}[(i)]
        \item $M$ is zero,
        \item $M_{\mathfrak{p}}$ is zero for all $\mathfrak{p} \in \operatorname{Spec}(R)$,
        \item $M_{\mathfrak{m}}$ is zero for all $\mathfrak{m}\in \mathrm{Max}\left(R\right)$.
    \end{enumerate} 
\end{corollary}

\begin{prf}
    (iii)$\implies$(i). Suppose $M_{\mathfrak{m}}$ is zero for all $\mathfrak{m}\in \mathrm{Max}\left(R\right)$. Given any $x\in M$, since $x$ maps to $0$ in $M_{\mathfrak{m}}$ for all $\mathfrak{m}\in \mathrm{Max}\left(R\right)$, there must be $x=0$ by \Cref{th:module_localization_glueing_property}. Thus $M$ is zero.\\
\end{prf}

\begin{corollary}{Exactness is a Local Property}{exactness_is_a_local_property}
    Given a sequence of $R$-modules $M\to M'\to M''$, the following are equivalent:
    \begin{enumerate}[(i)]
        \item $M\to M'\to M''$ is exact,
        \item $M_{\mathfrak{p}}\to M'_{\mathfrak{p}}\to M''_{\mathfrak{p}}$ is exact for all $\mathfrak{p} \in \operatorname{Spec}(R)$,
        \item $M_{\mathfrak{m}}\to M'_{\mathfrak{m}}\to M''_{\mathfrak{m}}$ is exact for all $\mathfrak{m}\in \mathrm{Max}\left(R\right)$.
    \end{enumerate}
\end{corollary}

\begin{prf}
    (i)$\implies$(ii) because localization is an exact functor. (ii)$\implies$(iii) is clear. It is left to show (iii)$\implies$(i). Let $H=\ker\left(M'\to M''\right)/\operatorname{im}\left(M\to M'\right)$. Since \hyperref[th:exact_functor_preserve_cohomology]{exact functor preserve cohomology}, we have 
    $$
    H_{\mathfrak{m}}\cong\ker \left(M'_{\mathfrak{m}}\to M''_{\mathfrak{m}}\right)/\operatorname{im}\left(M_{\mathfrak{m}}\to M'_{\mathfrak{m}}\right)=0
    $$ 
    for all $\mathfrak{m}\in \mathrm{Max}\left(R\right)$. Thus by \Cref{th:module_localization_glueing_property_cor} we have $H=0$, which implies $M\to M'\to M''$ is exact.
\end{prf}


\begin{proposition}{Glueing Functions}{}
    Let $R$ be a ring. Let $f_1, \ldots, f_n$ be elements of $R$ generating the unit ideal. Let $M$ be an $R$-module. The sequence
$$
\begin{aligned}
& 0 \longrightarrow M \xlongrightarrow{\alpha} \bigoplus_{i=1}^n M_{f_i} \xlongrightarrow{\beta} \bigoplus_{i, j=1}^n M_{f_i f_j} \\
& 
\end{aligned}
$$
is exact, where $\alpha(m)=\left(\frac{m}{1}, \cdots, \frac{m}{1}\right)$ and $\beta\left(\dfrac{m_1}{f_1^{e_1}}, \cdots, \dfrac{m_n}{f_n^{e_n}}\right)=\left(\dfrac{m_i}{f_i^{e_i}}-\dfrac{m_j}{f_j^{e_j}}\right)_{(i, j)}$.
\end{proposition}

\begin{prf}
 According to \Cref{th:exactness_is_a_local_property}, it suffices to show that the localization of the sequence at any maximal ideal $\mathfrak{m}$ is exact. Given any maximal ideal $\mathfrak{m}$ of $R$, since $f_1, \ldots, f_n$ generate the unit ideal, there is an $i$ such that $f_i \notin \mathfrak{m}$. Without loss of generality we may assume $f_1\notin \mathfrak{m}$. Note that \Cref{th:associative_localization} guarantees $\left(M_{f_i}\right)_{\mathfrak{m}}=\left(M_{\mathfrak{m}}\right)_{f_i}$ and $\left(M_{f_i f_j}\right)_{\mathfrak{m}}=\left(M_{\mathfrak{m}}\right)_{f_i f_{j}}$. In particular we have $\left(M_{f_1}\right)_{\mathfrak{m}}=M_{\mathfrak{m}}$ and $\left(M_{f_1 f_i}\right)_{\mathfrak{m}}=\left(M_{\mathfrak{m}}\right)_{f_i}$, because $f_1\in M_{\mathfrak{m}}^{\times}$. Thus it is suffices to show that the sequence
\[
    0 \longrightarrow M_{\mathfrak{m}} \xlongrightarrow{\alpha_{\mathfrak{m}}} \bigoplus_{i=1}^n \left(M_{\mathfrak{m}}\right)_{f_i} \xlongrightarrow{\beta_{\mathfrak{m}}} \bigoplus_{i, j=1}^n \left(M_{\mathfrak{m}}\right)_{f_i f_j}
\]
 is exact for $f_1=1$.

 Injectivity of $\alpha_{\mathfrak{m}}$ is trivial because the first component of $\alpha_{\mathfrak{m}}$ is the identity map on $M_{\mathfrak{m}}$. 

 For any $\mathbf{x}=\left(x_1, \dfrac{x_2}{f_2^{e_n}},\cdots, \dfrac{x_n}{f_n^{e_n}}\right)\in\ker \beta_{\mathfrak{m}}$ we have $\beta_{\mathfrak{m}}(\mathbf{x})=0$. Consider the $(1,i)$-component of $\beta_{\mathfrak{m}}\left(\mathbf{x}\right)$ for $i=2, \cdots, n$. Then we get
 \[
    x_1-\frac{x_i}{f_i^{e_i}}=0\implies \mathbf{x}=\left(x_1,x_1,\cdots,x_1\right)=\alpha_{\mathfrak{m}}\left(x_1\right)\implies \ker \beta_{\mathfrak{m}}\subseteq \operatorname{im}\alpha_{\mathfrak{m}}.
 \]
For any $\mathbf{y}=\left(y, y, \cdots, y\right)\in \operatorname{im}\alpha_{\mathfrak{m}}$, we have $\beta_{\mathfrak{m}}\left(\mathbf{y}\right)=0$, which means $\operatorname{im}\alpha_{\mathfrak{m}}\subseteq \ker \beta_{\mathfrak{m}}$. Thus the sequence is exact and we complete the proof.
\end{prf}


\subsection{Graded Object}

\begin{definition}{$I$-Graded Module (External Definition)}{}    
    Let $R$ be a ring and $I$ be a set. An \textbf{$I$-graded $R$-module} is a family of $R$-modules $\left(M_i\right)_{i\in I}$. The category of $I$-graded $R$-modules, denoted by $R\text{-}\mathsf{Mod}^I$, is simply the functor category $[I, R\text{-}\mathsf{Mod}]$, where $I$ is regarded as a discrete category.
\end{definition}

\begin{definition}{$I$-Graded Module (Internal Definition)}{graded_module_over_ring_internal}
    Let $R$ be a ring and $I$ be a set. An \textbf{$I$-graded $R$-module} is an $R$-module $M$ together with a family of submodules $\left(M_i\right)_{i\in I}$ such that
    \[
        M=\bigoplus_{i\in I}M_i.
    \]
\end{definition}

\begin{proposition}{$R\text{-}\mathsf{Mod}^I$ is a Monoidal Category}{}
    Let $R$ be a ring and $I$ be a commutative monoid. Then $\left(R\text{-}\mathsf{Mod}^I,\otimes\right)$ is a monoidal category with tensor product defined as
    \[
        \left(M\otimes N\right)_i=\bigoplus_{j+k=i}M_j\otimes N_k.
    \]
\end{proposition}



\begin{definition}{$I$-Graded Module over an Graded Ring (Internal Definition)}{graded_module_over_graded_ring_internal}
    Let $(I,+)$ be a monoid and $R$ be a $I$-graded ring with grading $(R_i)_{i\in I}$. An \textbf{$I$-graded module over graded ring $R$} is an $R$-module $M$ together with a family of submodules $\left(M_i\right)_{i\in I}$ such that
    \begin{enumerate}[(i)]
        \item $M=\bigoplus_{i\in I}M_i$.
        \item $R_iM_j\subseteq M_{i+j}$ for all $i, j\in I$.
    \end{enumerate}
\end{definition}

When $I$ is a monoid, \Cref{th:graded_module_over_ring_internal} is a special case of \Cref{th:graded_module_over_graded_ring_internal} because any ring $R$ can be regarded as a graded ring with trivial grading $R_0=R$ and $R_i=0$ for all $i\ne0$.

\section{Torsion-Free Modules}

\begin{definition}{Torsion Element of a Module}{}
    Let $R$ be a ring, and let $M$ be a left $R$-module. An element $m\in M$ is called a \textbf{torsion element of $M$} if there exists a \hyperref[th:zero_divisor]{regular element} $r\in R$ such that $rm=0$. 
    
    If $R$ is an integral domain, an element $m\in M$ is called a \textbf{torsion element of $M$} if one of the following equivalent conditions holds:
    \begin{enumerate}[(i)]
        \item There exists a element $r\in R-\{0\}$ such that $rm=0$.
        \item $\operatorname{Ann}_R(m)\neq \{0_R\}$.
    \end{enumerate}
\end{definition}


\begin{definition}{Torsion Submodule}{}
    Let $R$ be a ring, and let $M$ be an $R$-module. The \textbf{torsion subset of $M$} is the subset of $M$ consisting of all torsion elements of $M$, denoted by $M_{\mathrm{tor}}$. If $R$ is commutative, then $M_{\mathrm{tor}}$ is a submodule of $M$, called the \textbf{torsion submodule of $M$}. If $R$ is an integral domain, then 
     \[
    M_{\mathrm{tor}}=\{m\in M \mid \exists r\in R-\{0\},\; rm=0\}.
    \]
\end{definition}
\begin{prf}
    We can check that $M_{\mathrm{tor}}$ is a submodule of $M$ when $R$ is commutative. For any $m_1, m_2\in M_{\mathrm{tor}}$, there exist regular elements $r_1, r_2\in R$ such that $r_1m_1=0$ and $r_2m_2=0$. By \Cref{th:set_of_regular_elements_is_a_multiplicative_set}, $r_1r_2$ is also a regular element. Then we have 
    \[
        r_1r_2(m_1+m_2)=r_1r_2m_1+r_1r_2m_2=0+0=0\implies m_1+m_2\in M_{\mathrm{tor}},
    \]
    Let $m\in M_{\mathrm{tor}}$ and $r\in R$ be a regular element such that $rm=0$. Then for any $s\in R$, we have
    \[
        r(sm)=s(rm)=s\cdot 0=0\implies sm\in M_{\mathrm{tor}}.
    \]
\end{prf}

\begin{definition}{Torsion Module}{}
    Let $R$ be a ring, and let $M$ be an $R$-module. We say $M$ is a \textbf{torsion module} if all elements of $M$ are torsion elements, i.e. $M=M_{\mathrm{tor}}$.
\end{definition}

\begin{example}{}{}
    Let $R$ be a commutative ring, and let $M$ be an $R$-module. Then the torsion submodule $M_{\mathrm{tor}}$ is a torsion module.
\end{example}


\begin{definition}{Torsion-free Module}{}
    Let $R$ be a ring, and let $M$ be an $R$-module. We say $M$ is a \textbf{torsion-free module} if $0$ is the only torsion element of $M$, i.e. $M_{\mathrm{tor}}=\{0_M\}$.
\end{definition}

\begin{proposition}{Characterization of Torsion-Free Modules via Localization}{}
    Let $R$ be an integral domain, $M$ be an $R$-module and $S=R-\{0\}$ be the multiplicative set of $R$. Then the followings are equivalent:
    \begin{enumerate}[(i)]
        \item $M$ is a torsion-free module.
        \item $M\to S^{-1}M$ is injective.
        \item We have the following exact sequence
        \[
            0\longrightarrow M\longrightarrow M\otimes_R \mathrm{Frac}(R).
        \]
    \end{enumerate}
\end{proposition}
\begin{prf}
    (i) $\iff$ (ii). Suppose $M$ is a torsion-free module. Suppose
    \begin{align*}
        l_S:M&\longrightarrow S^{-1}M\\
         m&\longmapsto \frac{m}{1}
    \end{align*}
    is the localization map. Then according to \Cref{th:kernel_of_localization_map}, we have
    \[
    \ker l_S=\left\{m\in M \midv \exists s\in S,\; sm=0\right\}=M_{\mathrm{tor}}.
    \]
    Thus
    \[
    M\text{ is torsion-free}\iff M_{\mathrm{tor}}=\{0_M\}\iff \ker l_S=\{0_M\}\iff l_S\text{ is injective}.
    \]
\end{prf}

\begin{definition}{Torsion-free Quotient}{}
    Let $R$ be a commutative ring, and let $M$ be an $R$-module. Then the quotient module $M_{\mathrm{tf}}:=M/M_{\mathrm{tor}}$ is a torsion-free module, called the \textbf{torsion-free quotient of $M$}. This gives a functor $\mathrm{tf}:R\text{-}\mathsf{Mod}\to R\text{-}\mathsf{Mod}$
    \[
        \begin{tikzcd}[ampersand replacement=\&]
            R\text{-}\mathsf{Mod}\&[-25pt]\&[+30pt]\&[-30pt] R\text{-}\mathsf{Mod}_{\mathrm{tf}}\&[-30pt]\&[-30pt] \\ [-15pt] 
            M \arrow[dd, "f"{name=L, left}] 
            \&[-25pt] \& [+10pt] 
            \& [-30pt]M_{\mathrm{tf}}\arrow[dd, "{\overline{f}}"{name=R}] \&[-30pt]\ni
            \&[-30pt]m + M_{\mathrm{tor}}\arrow[dd,mapsto]\&[-30pt]\\ [-10pt] 
            \&  \phantom{.}\arrow[r, "{\mathrm{tf}}", squigarrow]\&\phantom{.}  \&   \\[-10pt] 
            N \& \& \&  N_{\mathrm{tf}}\&[-30pt]\ni
            \&[-30pt]f(m) + N_{\mathrm{tor}}
        \end{tikzcd}
    \]  
    $R\text{-}\mathsf{Mod}_{\mathrm{tf}}$ is a full subcategory of $R\text{-}\mathsf{Mod}$ consisting of all torsion-free modules. And we have the adjunction 
    \[
        \begin{tikzcd}[ampersand replacement=\&]
            R\text{-}\mathsf{Mod} \arrow[r, "\mathrm{tf}"{name=U}, bend left, start anchor=east, yshift=1.7ex, end anchor=west] \&[+18pt] 
            R\text{-}\mathsf{Mod}_{\mathrm{tf}} \arrow[l, "{U}"{name=D, anchor=north}, bend left, start anchor=west, yshift=-1.5ex, end anchor=east]
            \arrow[phantom, from=U, to=D, "\dashv"{rotate=-90}]
        \end{tikzcd}
    \]
    where $U:R\text{-}\mathsf{Mod}_{\mathrm{tf}}\to R\text{-}\mathsf{Mod}$ is the inclusion functor.
\end{definition}
\begin{prf}
    Let $m+M_{\mathrm{tor}}\in M/M_{\mathrm{tor}}$ be a torsion element of $M/M_{\mathrm{tor}}$. Then there exists a regular element $r\in R$ such that 
    \[
    r\left(m+M_{\mathrm{tor}} \right)=rm+M_{\mathrm{tor}}=0+M_{\mathrm{tor}},
    \]
    which implies $rm\in M_{\mathrm{tor}}$. Thus there exists a regular element $s\in R$ such that $srm=0$. Since $sr$ is a regular element, we get
    $m\in M_{\mathrm{tor}}$, which implies $m+M_{\mathrm{tor}}=0+M_{\mathrm{tor}}$. Therefore, $M/M_{\mathrm{tor}}$ is a torsion-free module.

    Next we are to show $f(M_{\mathrm{tor}})\subseteq N_{\mathrm{tor}}$. For any $m\in M_{\mathrm{tor}}$, there exists a regular element $r\in R$ such that $rm=0_M$. Then we have
    \[
        rf(m)=f(rm)=f(0_M)=0_N,
    \]
    which implies $f(m)\in N_{\mathrm{tor}}$. Hence $f(M_{\mathrm{tor}})\subseteq N_{\mathrm{tor}}$ and accordingly $\pi_N\circ f(M_{\mathrm{tor}})=\{0\}$, by the universal property of quotient module $M/M_{\mathrm{tor}}$, we have the following commutative diagram
    \[
        \begin{tikzcd}
            M \arrow[r, "f"] \arrow[d, "\pi_M"'] & N \arrow[d, "\pi_N"] \\
            M/M_{\mathrm{tor}} \arrow[r, "\overline{f}"', dashed] & N/N_{\mathrm{tor}}
        \end{tikzcd}
    \]
    Therefore, $\overline{f}$ is well-defined.
\end{prf}



\begin{definition}{$\mathfrak{a}$-Torsion}{}
    Let $R$ be a ring, $M$ be a left $R$-module and $\mathfrak{a}$ be a right ideal of $R$. The $\mathfrak{a}$-torsion of $M$ is a submodule of $M$ defined as
    \[
        M[\mathfrak{a}]:=\left\{m\in M\midv \forall a\in \mathfrak{a}, am=0\right\}.
    \]
\end{definition}
\begin{prf}
    We can check that $M[\mathfrak{a}]$ is a submodule of $M$. For any $m_1, m_2\in M[\mathfrak{a}]$, we have
    \[
        a(m_1+m_2)=am_1+am_2=0+0=0,\quad \forall a\in \mathfrak{a},
    \]
    which implies $m_1+m_2\in M[\mathfrak{a}]$. For any $m\in M[\mathfrak{a}]$ and $r\in R$, we have
    \[
        a(rm)=(ar)m=0,\quad \forall a\in \mathfrak{a},
    \]
    which implies $rm\in M[\mathfrak{a}]$. Therefore, $M[\mathfrak{a}]$ is a submodule of $M$.
\end{prf}

\begin{lemma}{}{filtration_of_a_torsion}
    Let $R$ be a ring, $M$ be a left $R$-module and $\mathfrak{a}$ be a right ideal of $R$. Then for any $n\in \mathbb{Z}_+$, we have
    \[
        M[\mathfrak{a}^n]\subseteq M[\mathfrak{a}^{n+1}].
    \]
\end{lemma}
\begin{prf}
    For any $m\in M[\mathfrak{a}^n]$ and any $c \in \mathfrak{a}^n$, we have
    \[
        c m = 0.
\]
Hence for any $b \in \mathfrak{a}^{n+1}$, there exist $a \in \mathfrak{a}$ and $c' \in \mathfrak{a}^n$ such that $b = a c'$. Then we have
\[
    b m = a c' m = 0 ,
\]
which implies $m\in M[\mathfrak{a}^{n+1}]$. Hence $M[\mathfrak{a}^n]$ is a submodule of $M[\mathfrak{a}^{n+1}]$.
\end{prf}

\begin{definition}{$\mathfrak{a}$-Power Torsion}{}
    Let $R$ be a ring, $M$ be a left $R$-module and $\mathfrak{a}$ be a right ideal of $R$. The $\mathfrak{a}$-power torsion of $M$ is a submodule of $M$ defined as
    \[
        M[\mathfrak{a}^\infty]:=\left\{m\in M\midv \exists n\in \mathbb{Z}_+, \forall a\in \mathfrak{a}^n, am=0\right\}=\bigcup_{n \ge 1}M[\mathfrak{a}^n]=\varinjlim_{n\ge 1}M[\mathfrak{a}^n].
    \]
\end{definition}
\begin{prf}
  By \Cref{th:filtration_of_a_torsion} we see $M[\mathfrak{a}^n]\subseteq M[\mathfrak{a}^{n+1}]$ for all $n\in \mathbb{Z}_+$. 
  \begin{center}
    \begin{tikzcd}
        &                                           &                             & {\varinjlim\limits_{n\ge 1}M[\mathfrak{a}^n]} &                   \\
{M[\mathfrak{a}]} \arrow[r] \arrow[rrru] & {M[\mathfrak{a}^2]} \arrow[r] \arrow[rru] & \cdots \arrow[r] \arrow[ru] & {M[\mathfrak{a}^n]} \arrow[r] \arrow[u]     & \cdots \arrow[lu]
\end{tikzcd}
  \end{center}
  Therefore, the colimit $M[\mathfrak{a}^\infty]=\varinjlim_{n\ge 1}M[\mathfrak{a}^n]$ is a submodule of $M$
\end{prf}



\begin{proposition}{}{}
    Let $R$ be an integral domain and $M$ be a finitely generated $R$-module. Then $M$ is a torsion-free module if and only if $M$ is a submodule of a finitely generated free $R$-module.
\end{proposition}

\begin{proposition}{Module Homomorphism Induced by Scalar Multiplication}{module_homomorphism_induced_by_scalar_multiplication}
   Let $R$ be a ring and $M$ be a left $R$-module. Suppose $N$ is an $R$-submodule of $M$, and $r\in R$. Then
    \begin{align*}
        \mu_r:N&\longrightarrow M,\\
         n&\longmapsto rn .
    \end{align*}
    is an $R$-module homomorphism and we have
    \[
    N/\ker\mu_r \cong \operatorname{im}\mu_r= rN=\{rn \mid n\in N\}.
    \]
    And the following are equivalent:
    \begin{enumerate}[(i)]
        \item For any $n\in N$, if $rn=0$, then $n=0$.
        \item $\mu_r$ is injective.
        \item $N\cong rN$.
    \end{enumerate}
\end{proposition}
\begin{corollary}{}{equivalent_characterization_of_regular_element}
    Let $R$ be a commutative ring and $r\in R$. Then the following are equivalent:
    \begin{enumerate}[(i)]
        \item $r$ is a \hyperref[th:zero_divisor]{regular element}.
        \item 
        \[
        0\longrightarrow R \xlongrightarrow{\mu_r} R  \xlongrightarrow{\pi} R/rR \longrightarrow 0
        \]
        is a short exact sequence of $R$-modules.
    \end{enumerate}
\end{corollary}
\begin{prf}
    (i)$\implies$(ii). Suppose $r\in R$ is a regular element. Then $r\ne 0$. If there exists $n\in R$ such that $r n=0$, there must be $n=0$. Thus by \Cref{th:module_homomorphism_induced_by_scalar_multiplication} we have $\mu_r$ is injective. Since $\operatorname{im}\mu_r=rR=\ker \pi$, the sequence is exact.

    (ii)$\implies$(i). Suppose the sequence is exact. Then $\mu_r$ is injective, which by \Cref{th:module_homomorphism_induced_by_scalar_multiplication} implies that for any $n\in R$, if $rn=0$, then $n=0$. Thus $r$ is a regular element.
\end{prf}


\begin{proposition}{}{}
    \begin{enumerate}[(i)]
        \item If $R$ is a commutative ring, then any flat $R$-module is torsion-free.
        \item If $R$ is a Dedekind domain. Then an $R$-module is flat if and only if it is torsion-free.
    \end{enumerate}
\end{proposition}
\begin{prf}
    \begin{enumerate}[(i)]
        \item 
    If there exists $m \in M$ such that $rm = 0$ for some regular element $r \in R$, then by \Cref{th:equivalent_characterization_of_regular_element},
    \[
    0\longrightarrow R \xlongrightarrow{\mu_r} R  \xlongrightarrow{\pi} R/rR \longrightarrow 0
    \]
    is a short exact sequence of $R$-modules. Since $M$ is flat, the functor $-\otimes_R M$ is exact. Thus we have the following exact sequence
    \[
        0\longrightarrow R\otimes_R M \xlongrightarrow{\mu_r\otimes 1} R\otimes_R M  \xlongrightarrow{\pi\otimes 1} (R/rR) \otimes_R M \longrightarrow 0,
    \]
    which is isomorphic to
    \[
        0\longrightarrow M \xlongrightarrow{\mu_r} M  \xlongrightarrow{\pi} M/rM \longrightarrow 0.
    \]
    According to \Cref{th:module_homomorphism_induced_by_scalar_multiplication}, the injectivity of $\mu_r:M\to M$ implies $m=0$. Therefore, $M$ is torsion-free.
    \end{enumerate}
\end{prf}



\section{Flat Modules}
For any $R$-module $M$, the functor $-\otimes_R M$ is right exact.
\begin{definition}{Flat Module}{flat_module}
    Let $R$ be a ring. An $R$-module $M$ is called \textbf{flat} if the functor $-\otimes_R M$ is exact.
\end{definition}

\begin{proposition}{Direct Sum of Flat Modules is Flat}{}
    Let $R$ be a ring and $\left(M_i\right)_{i\in I}$ be a family of $R$-modules. If each $M_i$ is flat, then $\bigoplus_{i\in I}M_i$ is flat.
\end{proposition}
\begin{prf}
    For any exact sequence $0\to A\to B\to C\to 0$, we have the following commutative diagram
    \[
        \begin{tikzcd}
            0 \arrow[r] & A \arrow[r] \arrow[d, "f"] & B \arrow[r] \arrow[d, "g"] & C \arrow[r] \arrow[d, "h"] & 0 \\
            0 \arrow[r] & A' \arrow[r] & B' \arrow[r] & C' \arrow[r] & 0
        \end{tikzcd}
    \]
    where the rows are exact. Since $M_i$ is flat, we have the following commutative diagram
    \[
        \begin{tikzcd}
            0 \arrow[r] & A\otimes M_i \arrow[r] \arrow[d, "f\otimes 1"] & B\otimes M_i \arrow[r] \arrow[d, "g\otimes 1"] & C\otimes M_i \arrow[r] \arrow[d, "h\otimes 1"] & 0 \\
            0 \arrow[r] & A'\otimes M_i \arrow[r] & B'\otimes M_i \arrow[r] & C'\otimes M_i \arrow[r] & 0
        \end{tikzcd}
    \]
    where the rows are exact. Then we have the following commutative diagram
    \[
        \begin{tikzcd}
            0 \arrow[r] & \bigoplus\limits_{i\in I}A\otimes M_i \arrow[r] \arrow[d, "\bigoplus\limits_{i\in I}f\otimes 1"] & \bigoplus\limits_{i\in I}B\otimes M_i \arrow[r] \arrow[d, "\bigoplus\limits_{i\in I}g\otimes 1"] & \bigoplus\limits_{i\in I}C\otimes M_i \arrow[r] \arrow[d, "\bigoplus\limits_{i\in I}h\otimes 1"] & 0 \\ [1.5em]
            0 \arrow[r] & \bigoplus\limits_{i\in I}A'\otimes M_i \arrow[r] & \bigoplus\limits_{i\in I}B'\otimes M_i \arrow[r] & \bigoplus\limits_{i\in I}C'\otimes M_i \arrow[r] & 0
        \end{tikzcd}
    \]
    where the rows are exact. Thus $\bigoplus_{i\in I}M_i$ is flat.
    
\end{prf}

\section{Projective Modules}
$\mathrm{Hom}_{R\text{-}\mathsf{Mod}}\left(P, -\right)$ is a left exact functor.
\begin{definition}{Projective Module}{projective_module}
    Let $R$ be a ring. An $R$-module $P$ is called \textbf{projective} if $\mathrm{Hom}_{R\text{-}\mathsf{Mod}}\left(P, -\right)$ is an exact functor.
\end{definition}

\begin{proposition}{Equivalent Definitions of Projective Module}{}
    Let $R$ be a ring and $P$ be an $R$-module. The following are equivalent:
    \begin{enumerate}[(i)]
        \item $P$ is projective.
        \item For any surjective $R$-module homomorphism $f:M\to N$, the induced map $f^*:\mathrm{Hom}_{R\text{-}\mathsf{Mod}}\left(P,M\right)\to \mathrm{Hom}_{R\text{-}\mathsf{Mod}}\left(P,N\right)$ is surjective.
        \item For any surjective $R$-module homomorphism $f:M\to N$ and any $R$-module homomorphism $g:P\to N$, there exists an $R$-module homomorphism $h:P\to M$ such that the following diagram commutes
       \begin{center}
           \begin{tikzcd}[ampersand replacement=\&]
               \& P \arrow[d, "g"] \arrow[ld, "h"', dashed] \\
               M \arrow[r, "f"'] \& N \arrow[r] \& 0
           \end{tikzcd}
       \end{center}
        \item $P$ is a direct summand of a free module.
    \end{enumerate}
\end{proposition}

\section{Module over Commutative Ring}
\begin{proposition}{$R\text{-}\mathsf{Mod}$ is a Symmetric Monoidal Category for Commutative Ring $R$}{}
    Let $R$ be a commutative ring. Then the category $R$-$\mathsf{Mod}$ is a \hyperref[th:symmetric_monoidal_category]{symmetric monoidal category} with the following structure:
    \begin{enumerate}[(i)]
        \item Tensor product: the functor $\otimes_R:R\text{-}\mathsf{Mod}\times R\text{-}\mathsf{Mod}\to R\text{-}\mathsf{Mod}$ defined by
        \[
            \begin{tikzcd}[ampersand replacement=\&]
                R\text{-}\mathsf{Mod}\times R\text{-}\mathsf{Mod}\&[-25pt]\&[+10pt]\&[-30pt] R\text{-}\mathsf{Mod}\&[-30pt]\&[-30pt] \\ [-15pt] 
                (X_1,Y_1)  \arrow[dd, "f\times g"{name=L, left}] 
                \&[-25pt] \& [+10pt] 
                \& [-30pt]X_1\otimes_R Y_1\arrow[dd, "f\otimes_R g"{name=R}] \\ [-10pt] 
                \&  \phantom{.}\arrow[r, "\otimes_R", squigarrow]\&\phantom{.}  \&   \\[-10pt] 
                (X_2,Y_2)  \& \& \& X_2\otimes_R Y_2
            \end{tikzcd}
            \]
        \item Associator: the natural isomorphism $a$
        \[
            \begin{tikzcd}[ampersand replacement=\&]
                R\text{-}\mathsf{Mod} \times R\text{-}\mathsf{Mod}\times R\text{-}\mathsf{Mod} \arrow[r, "(-\otimes-)\otimes-"{name=A, above}, bend left] \arrow[r, "-\otimes(-\otimes-)"'{name=B, below}, bend right] \&[+45pt] R\text{-}\mathsf{Mod}
                \arrow[Rightarrow, shorten <=5.5pt, shorten >=5.5pt, from=A.south-|B, to=B, "a", "\sim\hspace{1pt}"']
            \end{tikzcd}
        \]
        defined by 
        \begin{align*}
            a_{(X,Y,Z)}:(X\otimes_R Y)\otimes_R Z&\longrightarrow X\otimes_R (Y\otimes_R Z)\\
            (x\otimes_R y)\otimes_R z&\longmapsto x\otimes_R (y\otimes_R z)
        \end{align*}
        \item Unit object: $R\in \mathrm{Ob}(R\text{-}\mathsf{Mod})$ 
        \item The isomorphism in $R\text{-}\mathsf{Mod}$: 
        \begin{align*}
            \iota:R\otimes_R R &\longrightarrow R\\
            r\otimes_R s&\longmapsto rs
        \end{align*}
        \item Briad isomorphism: the natural isomorphism $B$
        \[
            \begin{tikzcd}[ampersand replacement=\&]
                R\text{-}\mathsf{Mod}\times R\text{-}\mathsf{Mod} \arrow[r, "(-\otimes ?)"{name=A, above}, bend left] \arrow[r, "(? \otimes-)"'{name=B, below}, bend right] \&[+45pt] R\text{-}\mathsf{Mod}
                \arrow[Rightarrow, shorten <=5.5pt, shorten >=5.5pt, from=A.south-|B, to=B, "B", "\sim\hspace{1pt}"']
            \end{tikzcd}
        \]
        defined by
        \begin{align*}
            B_{X,Y}:X\otimes_R Y&\longrightarrow Y\otimes_R X\\
            x\otimes_R y&\longmapsto y\otimes_R x
        \end{align*}
    \end{enumerate}
\end{proposition}
\begin{prf}
    We could check the following conditions holds
    \begin{enumerate}[(i)]
        \item The pentagon axiom: the following diagram commutes
    \[
        \begin{tikzcd}[ampersand replacement=\&, column sep=small]
            \& [-50pt]                  \&[-25pt]    ((A\otimes B)\otimes C)\otimes D \arrow[lld, "{a_{(A,B,C)}\otimes \mathrm{id}_D}"'] \arrow[rrd, "{a_{(A\otimes B,C,D)}}"] \& [-25pt]                  \&   [-50pt]                                                                      \\[+20pt]
(A\otimes( B\otimes C))\otimes D \arrow[rd, "{a_{(A,B\otimes C,D)}}"'] \&                                                                                    \&    \&       \& (A\otimes B)\otimes (C\otimes D) \arrow[ld, "{a_{(A, B, C\otimes D)}}"] \\[+35pt]
            \& A\otimes( (B\otimes C)\otimes D) \arrow[rr, "{\mathrm{id}_A\otimes a_{(B,C,D)}}"'] \&    \& A\otimes( B\otimes (C\otimes D)) \&                                                                        
\end{tikzcd}
    \]
    \item Unit axiom: the functors $R\otimes_R -:R\text{-}\mathsf{Mod}\to R\text{-}\mathsf{Mod}$ and $-\otimes_R R:R\text{-}\mathsf{Mod} \to R\text{-}\mathsf{Mod} $ are category equivalences.
    \item Hexagon axiom.
    \item  \[
        B_{Y,X}\circ B_{X,Y}=\mathrm{id}_{X\otimes_R Y}.
    \]
    \end{enumerate}
\end{prf}

\begin{proposition}{$R$-$\mathsf{Mod}$ is a Self-Enriched Category for Commutative Ring $R$}{}
    If $R$ is a commutative ring, then the category $R\text{-}\mathsf{Mod}$ is self-enriched. More explicitly, the category $R\text{-}\mathsf{Mod}$ is an $R\text{-}\mathsf{Mod}$-enriched category with the following structure:
    \begin{enumerate}[(i)]
        \item $\mathrm{Hom}$-object: for each pair of objects $A,B\in \mathrm{Ob}(R\text{-}\mathsf{Mod})$, the object $\mathrm{Hom}_{R\text{-}\mathsf{Mod}}(A,B)\in \mathrm{Ob}(R\text{-}\mathsf{Mod})$, where the $R$-module structure on $\mathrm{Hom}_{R\text{-}\mathsf{Mod}}(A,B)$ is defined pointwise as follows:
        \begin{itemize}
            \item addition: 
            \begin{align*}
                +:\mathrm{Hom}_{R\text{-}\mathsf{Mod}}(A,B)\times \mathrm{Hom}_{R\text{-}\mathsf{Mod}}(A,B)&\longrightarrow \mathrm{Hom}_{R\text{-}\mathsf{Mod}}(A,B)\\
                (f,g)&\longmapsto (a\mapsto f(a)+g(a))
            \end{align*}
            \item scalar multiplication: 
            \begin{align*}
                R\times \mathrm{Hom}_{R\text{-}\mathsf{Mod}}(A,B)&\longrightarrow \mathrm{Hom}_{R\text{-}\mathsf{Mod}}(A,B)\\
                (r,f)&\longmapsto (a\mapsto r\cdot f(a))
            \end{align*}
        \end{itemize}
       
        \item Composition: for each triple of objects $A,B,C\in \mathrm{Ob}(R\text{-}\mathsf{Mod})$, the composition morphism in $R\text{-}\mathsf{Mod}$ defined by
        \begin{align*}
            \circ:\mathrm{Hom}_{R\text{-}\mathsf{Mod}}(B,C)\otimes_R \mathrm{Hom}_{R\text{-}\mathsf{Mod}}(A,B)&\longrightarrow \mathrm{Hom}_{R\text{-}\mathsf{Mod}}(A,C)\\
            g\otimes_R f&\longmapsto g\circ f
        \end{align*}

        \item Identity: for each object $A\in \mathrm{Ob}(R\text{-}\mathsf{Mod})$, the morphism in $R\text{-}\mathsf{Mod}$ defined by
        \begin{align*}
            \mathcal{I}d_A:R&\longrightarrow \mathrm{Hom}_{R\text{-}\mathsf{Mod}}(A,A)\\
            r&\longmapsto \left(r\cdot \mathrm{id}_A:x\mapsto r\cdot x\right)
        \end{align*}
    \end{enumerate}
\end{proposition}
\begin{prf}
    the following conditions hold
    \begin{enumerate}[(i)]
        \item For each quadruple of objects $A,B,C,D\in \mathrm{Ob}(\mathsf{C})$, the following diagram in $R\text{-}\mathsf{Mod}$ commutes
        \[
            \begin{tikzcd}[ampersand replacement=\&, column sep=small]
                    \&[-130pt] {\left(\mathrm{Hom}(C,D)\otimes \mathrm{Hom}(B,C)\right)\otimes \mathrm{Hom}(A,B) } \arrow[ld, "\circ\;\otimes \,\mathrm{id}_{\mathrm{Hom}(A,B)}"'] \arrow[rr, "\cong"] \&  [-30pt]   \&  [-30pt]{\mathrm{Hom}(C,D)\otimes \left(\mathrm{Hom}(B,C)\otimes \mathrm{Hom}(A,B)\right) } \arrow[rd, "\mathrm{id}_{\mathrm{Hom}(C,D)}\,\otimes\;\circ "] \&  [-130pt]  \\[+35pt]
{\mathrm{Hom}(B,D)\otimes \mathrm{Hom}(A,B) } \arrow[rrd, "\circ"'] \&                                                                                                                                    \&                                               \&                                                                                                               \& {\mathrm{Hom}(C,D)\otimes \mathrm{Hom}(A,C) } \arrow[lld, "\circ"] \\[+20pt]
                    \&                                                                                                                                    \& {\mathrm{Hom}(A,D)} \&                                                                                                               \&                                                                   
\end{tikzcd}
    \]
    \item For each pair of objects $A,B\in \mathrm{Ob}(\mathsf{C})$, the following diagrams in $\mathsf{V}$ commute
    \[
    \begin{tikzcd}[ampersand replacement=\&, column sep=small]
        {1\otimes \mathrm{Hom}_{\mathsf{C}}(A,B)} \arrow[rr, "{{\mathcal{I}d}_B\otimes\,\mathrm{id}_{\mathrm{Hom}_{\mathsf{C}}(A,B)}}"] \arrow[rd, "\cong"'] \&                     \& {\mathrm{Hom}_{\mathsf{C}}(B,B)\otimes \mathrm{Hom}_{\mathsf{C}}(A,B)} \arrow[ld, "\circ"] \\[+10pt]
        \& {\mathrm{Hom}_{\mathsf{C}}(A,B)} \&   
\end{tikzcd}
    \]
    \[
        \begin{tikzcd}[ampersand replacement=\&, column sep=small]
            {\mathrm{Hom}_{\mathsf{C}}(A,B)\otimes 1} \arrow[rr, "\mathrm{id}_{\mathrm{Hom}_{\mathsf{C}}(A,B)}\otimes\,{\mathcal{I}d}_A "] \arrow[rd, "\cong"'] \&                     \& {\mathrm{Hom}_{\mathsf{C}}(A,B)\otimes \mathrm{Hom}_{\mathsf{C}}(A,A)} \arrow[ld, "\circ"] \\[+10pt]
            \& {\mathrm{Hom}_{\mathsf{C}}(A,B)} \&
    \end{tikzcd}
        \]
    \end{enumerate}
\end{prf}

\section{Free Module of Finite Rank over Commutative Ring}
\subsection{Determinant}

\begin{definition}{Determinant of $R$-linear Transformation on Free Module of Finite Rank}{}
    Let $R$ be a commutative ring and $M$ be a free $R$-module of finite rank $n$. The \textbf{determinant} of an $R$-linear map $f:M\to M$ can be defined as one of the following equivalent ways:
    \begin{enumerate}[(i)]
        \item The functor $\Largewedge^n:R\text{-}\mathsf{Mod}\to R\text{-}\mathsf{Mod}$ induces a hom-set morphism 
        \begin{align*}
            \largewedge^n:\mathrm{End}_{R\text{-}\mathsf{Mod}}\left(M\right) &\longrightarrow\mathrm{End}_{R\text{-}\mathsf{Mod}}\left(\largewedge^n(M)\right)\\
        f &\longmapsto f\wedge\cdots\wedge f.
        \end{align*}
        Note $\mathrm{End}_{R\text{-}\mathsf{Mod}}\left(\largewedge^n(M)\right)$ is a 1-dimensional $R$-module with basis $\mathrm{id}_{\largewedge^n(M)}$. And $R$ is a also a 1-dimensional $R$-module with basis $1_R$. We have the following $R$-module isomorphism
        \begin{align*}
            s:\mathrm{End}_{R\text{-}\mathsf{Mod}}\left(\largewedge^n(M)\right)&\xlongrightarrow{\sim} R\\
            \mathrm{id}_{\largewedge^n(M)} &\longmapsto 1_R.
        \end{align*}
        The \textbf{determinant} of $f$ is defined as the composition $\det:=s\circ \largewedge^n$.
        \item Suppose $\{e_1,\cdots,e_n\}$ is a baisis of $M$, then for any $f\in \mathrm{End}_{R\text{-}\mathsf{Mod}}\left(M\right)$, it can be uniquely represented by a matrix $A=(a_{ij})$ with respect to the basis $\{e_1,\cdots,e_n\}$. Then the \textbf{determinant} of $f$ is defined as follows
        \begin{align*}
            \largewedge^n:\mathrm{End}_{R\text{-}\mathsf{Mod}}\left(M\right) &\longrightarrow R\\
        f &\longmapsto f\wedge\cdots\wedge f.
        \end{align*}
    \end{enumerate}
\end{definition}


\section{Finitely Generated Module over PID}

\begin{proposition}{Torsion-free $\iff$ Free for Finitely Generated Modules over PID}{}
    Let $R$ be a PID and $M$ be a finitely generated $R$-module. Then $M$ is torsion-free if and only if $M$ is free.
\end{proposition}

\begin{proposition}{}{}
    Let $R$ be a PID and $M$ be a free $R$-module. Then any submodule $N$ of $M$ is free. Moreover, we have $\mathrm{rk}_R(N)\le \mathrm{rk}_R(M)$.
\end{proposition}

\begin{proposition}{}{}
    Let $R$ be a PID and $M$ be an $R$-module. If $M_{\mathrm{tf}}=M/M_{\mathrm{tor}}$ is finitely generated, then 
    \begin{enumerate}[(i)]
        \item $M_{\mathrm{tf}}$ is free.
        \item $M=M_{\mathrm{tor}}\oplus E$, where $E$ is a free submodule of $M$ with $\mathrm{rk}_R(E)<\infty$.
    \end{enumerate}
\end{proposition}
\begin{prf}
    Since $M_{\mathrm{tf}}$ is finitely generated, it is a finitely generated torsion-free module over PID, which is free. Then we have $M_{\mathrm{tf}}\cong R^{\oplus n}$ for some $n\in \mathbb{Z}_+$. Let $\{e_1, \ldots, e_n\}$ be a basis of $M_{\mathrm{tf}}$. For any $m\in M$, we have $m=\sum_{i=1}^n r_i e_i$ for some $r_i\in R$. Define $E:=\bigoplus_{i=1}^n Re_i$. Then we have $M=M_{\mathrm{tor}}\oplus E$.
\end{prf}


\begin{proposition}{Smith Normal Form}{}
    Let $R$ be a PID and $M \in \operatorname{Mat}_{m \times n}(R)$ be an $m \times n$ matrix with entries in $R$. Then there exist invertible matrices $P \in \mathrm{GL}_m(R)$ and $Q \in \mathrm{GL}_n(R)$ such that
    \[
        PMQ = \begin{bmatrix}
            d_1 & 0 & 0 & \cdots & 0 & 0 & \cdots & 0 \\
            0 & d_2 & 0 & \cdots & 0 & 0 & \cdots & 0 \\
            0 & 0 & d_3 & \cdots & 0 & 0 & \cdots & 0 \\
            \vdots & \vdots & \vdots & \ddots & \vdots & \vdots & \ddots & \vdots \\
            0 & 0 & 0 & \cdots & d_r & 0 & \cdots & 0 \\
            0 & 0 & 0 & \cdots & 0 & 0 & \cdots & 0 \\
            \vdots & \vdots & \vdots & \ddots & \vdots & \vdots & \ddots & \vdots \\
            0 & 0 & 0 & \cdots & 0 & 0 & \cdots & 0
        \end{bmatrix}
    \]
    where $d_i \in R$ are such that $d_i \mid d_{i+1}$ for all $1 \leq i < r$ and $r = \operatorname{rank}(M)$.
\end{proposition}






