
\chapter{Valuation Theory}
\section{Valuation of Ring}
\begin{definition}{Totally Ordered Abelian Group}{totally_ordered_abelian_group}
    Suppose $(\Gamma,+)$ is an abelian group and $\le$ is a \hyperref[th:homogeneous_relation]{total order} on $\Gamma$. Totally ordered abelian group is a tuple $(\Gamma,+,\le)$ such that for any $a,b,c\in \Gamma$,
    \[
    a\le b \implies a+c\le b+c.
    \]
    The total order $\le$ can induce a strict total order $<$ on $\Gamma$ by defining $a<b\iff a\le b$ and $a\ne b$.
\end{definition}

\begin{proposition}{Properties of Totally Ordered Abelian Group}{}
    Let $(\Gamma,+,\le)$ be a totally ordered abelian group. Then
    \begin{enumerate}[(i)]
        \item $a\le a',b\le b'\implies a+b\le a'+b'$.
        \item $x\le y\iff -y\le -x$. 
        \item $\Gamma$ is torsion-free. That is, for all $n\in\mathbb{Z}_{\ge1}$ and $a\in\Gamma$, 
        \[
            na= 0\implies 
            a= 0.
        \] 
    \end{enumerate}
\end{proposition}

\begin{prf}
    \begin{enumerate}[(i)]
        \item If $a\le a',b\le b'$, then $a+b\le a'+b\le a'+b'$.
        \item $x\le y\implies x-x-y\le y-x-y\implies -y\le -x$. The other direction is similar.
        \item If $a>0$, then $na>0$ for all $n\in \mathbb{Z}_{\ge 1}$. If $a<0$, then $na<0$ for all $n\in \mathbb{Z}_{\ge 1}$. Therefore, if $a\ne 0$, then $na\ne 0$ for all $n\in \mathbb{Z}_{\ge 1}$.
        
    \end{enumerate}
\end{prf}

\begin{proposition}{Extended Totally Ordered Abelian Group}{}
    Let $(\Gamma,+,\le)$ be a totally ordered abelian group. The total order and group addition on $\Gamma$ are extended to the set $\Gamma \cup\{\infty\}$ by the rules:
    \begin{itemize}
        \item $\alpha\le\infty$ for all $\alpha \in \Gamma\cup\{\infty\}$,
        \item $\infty+\alpha=\alpha+\infty=\infty$ for all $\alpha \in \Gamma\cup\{\infty\}$.
    \end{itemize}
\end{proposition}


\begin{definition}{Valuation of Ring}{}
    Let $R$ be a commutative ring, and $(\Gamma, +, \leq)$ be a totally ordered abelian group. A valuation on $R$ with value group $\Gamma$ refers to a mapping $v: R \rightarrow \Gamma \sqcup\{\infty\}$ satisfying the following properties:
    \begin{itemize}
        \item $v(1)=0$, $v(0)=\infty$,
        \item $v(x y)=v(x)+v(y), \quad\forall x, y \in R$,
        \item $v(x+y) \geq \min \{v(x), v(y)\}, \quad\forall x, y \in R$.        
    \end{itemize}
    Furthermore, we require that $v(R) -\{\infty\}$ generates the group $\Gamma$. If there exists an embedding of the totally ordered abelian group $\Gamma \hookrightarrow \mathbb{R}$, then $v$ is referred to as a rank 1 valuation.
\end{definition}

\begin{proposition}{Properties of Valuation of Ring}{}
    Let $v:R\to \Gamma \cup\{\infty\}$ be a valuation of a commutative ring $R$. Then
    \begin{enumerate}[(i)]
        \item If $x\in R^\times$, then $v(x^{-1})=-v(x)$.
        \item $v(R^\times)$ is a subgroup of $\Gamma$.
        \item If $a^n=1$ for some $n\in\mathbb{Z}_{\ge1}$, then $v(a)=0$. Specially, $v(-1)=0$.
        \item $v(-a)=v(a)$ for all $a\in R$.
        \item $v^{-1}\left(\infty\right)$ is a prime ideal of $R$.
        \item By the universal property quotient set, $v$ induces a map
        \begin{align*}
            \tilde{v}: R/v^{-1}\left(\infty\right)&\longrightarrow \Gamma\cup\{\infty\}\\
            x+v^{-1}\left(\infty\right)&\longmapsto v(x)
        \end{align*}
        Moreover, $\tilde{v}$ is a valuation of $R/v^{-1}\left(\infty\right)$.
        \item For any $x_1,\cdots,x_n\in R$, we have
        \[
            v\left(x_1+\cdots+x_n\right) \geq \min \left\{v\left(x_1\right), \cdots, v\left(x_n\right)\right\}
            \]
        If there exists $j$ such that for all $i\ne j$ we have $v(x_j)<v(x_i)$, then the equality 
        \[
            v\left(x_1+\cdots+x_n\right) = v(x_j)
            \]
            holds.
    \end{enumerate}
\end{proposition}

\begin{prf}
    \begin{enumerate}[(i)]
        \item $v(x^{-1})=v(x^{-1}x)-v(x)=v(1)-v(x)=-v(x)$.
        \item If $x\in R^\times$, then $v(x)+v(x^{-1})=0\implies v(x)\ne \infty$. 
        \item $v(a^n)=nv(a)=0\implies v(a)=0$.
        \item $v(-a)=v(-1)+v(a)=0+v(a)=v(a)$.
        \item For any $x,y\in v^{-1}(\infty)$, we have $v(x+y)\ge \min\left(v(x),v(y)\right)=\infty$, which means $x+y\in v^{-1}(\infty)$. For any $r\in R$ and $x\in v^{-1}(\infty)$, we have $v(rx)=v(r)+v(x)=\infty$, which means $rx\in v^{-1}(\infty)$. Thus $v^{-1}(\infty)$ is a ideal of $R$. If $x,y\in R$ and $xy\in v^{-1}(\infty)$, then $v(xy)=v(x)+v(y)=\infty$, which means $x\in v^{-1}(\infty)$ or $y\in v^{-1}(\infty)$. Thus $v^{-1}(\infty)$ is a prime ideal of $R$.
        \item We first check $\tilde{v}$ is well-defined. If $x-y=a\in v^{-1}(\infty)$, then we have 
        \[
            v(x)=v(y+a)\ge \min\left\{v(y),v(a)\right\}=\min\left\{v(y),\infty\right\}=v(y).
        \]
        Similarly, we have $v(y)=v(x-a)\ge v(x)$, which means $v(x)=v(y)$. Thus $\tilde{v}$ is well-defined. It is easy to check that $\tilde{v}$ is a valuation.
    \end{enumerate}
\end{prf}

% \begin{definition}{Trivial Valuation}{}
%     A valuation $v$ on a commutative ring $R$ is called \textbf{trivial} if 
%     \[
%         v(x)=\begin{cases}
%             0 & \text{if }x\in R^{\times},\\
%             \infty & \text{if }x\notin R^{\times}.
%         \end{cases}
%     \]
% \end{definition}


\section{Valuation of Field}
\begin{definition}{Valuation of Field}{valuation_of_field}
    Suppose $K$ is a field and $(\Gamma,+,\ge)$ is an totally ordered abelian group. 
Then a \textbf{valuation of $K$} is any map
$$
v: K \rightarrow \Gamma \cup\{\infty\}
$$
which satisfies the following properties for all $a, b$ in $K$ :
\begin{itemize}
    \item $v(a)=\infty$ if and only if $a=0$,
    \item $v(a b)=v(a)+v(b)$, i.e. $v$ is a abelian group homomorphism from $K^{\times}$ to $\Gamma$,
    \item $v(a+b) \geq \min (v(a), v(b))$, with equality if $v(a) \neq v(b)$.
\end{itemize}
\end{definition}

\begin{definition}{Value Group}{}
    The \textbf{value group} of a valuation $v$ is the subgroup of $\Gamma$ defined as $v(K^{\times})$.
\end{definition}

\begin{definition}{Discrete Valuation}{}
    A \textbf{discrete valuation} on a field $K$ is a valuation $v: K\to \mathbb{Z} \cup\{\infty\}$.
\end{definition}

\begin{definition}{Valuation Ring}{}
    The \textbf{valuation ring} of a valuation $v$ is the subring of $K$ defined as
    $$
    \mathcal{O}_{v}:=\{a \in K: v(a) \geq 0\}.
    $$
\end{definition}

\begin{proposition}{}{}
    Suppose $v$ is a valuation of a field $K$. Then the unit group of $\mathcal{O}_{v}$ has the form 
    $$
    \mathcal{O}_{v}^{\times}=\{a \in K: v(a)=0\}.
    $$  
\end{proposition}

\begin{prf}
    For any $a\in \mathcal{O}_{v}^{\times}$, we have $a^{-1}\in \mathcal{O}_{v}$ and $v(a)=-v(a^{-1})\le 0$. This forces $v(a)=0$. Conversely, for any $a\in K$ such that $v(a)=0$, we have $v(a^{-1})=-v(a)=0$, which means $a^{-1}\in \mathcal{O}_{v}$. Thus $a\in \mathcal{O}_{v}^{\times}$.
\end{prf}

\begin{definition}{Residue Field of a Valuation}{}
    Suppose $v$ is a valuation of a field $K$. Then
    $$
    \mathfrak{m}_v := \{a \in K: v(a)>0\}
    $$
    is a maximal ideal of $\mathcal{O}_{v}$. The \textbf{residue field} of $v$ is defined as $\kappa_v=\mathcal{O}_{v}/\mathfrak{m}_v$.
\end{definition}

\begin{definition}{Equivalent Valuation}{}
    Suppose a filed $K$ has two valuations $v:K\to\Gamma \cup\{\infty\}$ and $v':K\to\Gamma' \cup\{\infty\}$. we say $v$ and $v'$ are \textbf{equivalent} if there is an order-preserving group isomorphism $\varphi: v(K^\times) \rightarrow v'(K^\times)$ such that $v'=v\circ \varphi$.
\end{definition}

\begin{proposition}{}{}
   Two valuations are equivalent if and only if their valuation rings are equal.
\end{proposition}

\begin{proposition}{}{}
    Suppose $v$ is a valuation of a field $K$ and $\varpi$ is an element in $\mathcal{O}_v-\{0\}$ such that 
    $$
    \sup\left\{n v\left(\varpi\right)\in \Gamma\mid n\in\mathbb{N}\right\}=\infty.
    $$
    Then there is a natural isomorphism $K\cong \mathcal{O}_v\left[\frac{1}{\varpi}\right]$.
\end{proposition}

\begin{prf}
    Since $K=\mathrm{Frac}(\mathcal{O}_v)$, we have an embedding $\mathcal{O}_v\left[\frac{1}{\varpi}\right]\hookrightarrow K$. For any $x\in K$, there exists $n\in \mathbb{N}$ such that $nv(\varpi)\ge -v(x)$. Thus
    \[
    v(x\varpi^n)= v(x)+nv(\varpi)\ge 0\implies x\varpi^n\in \mathcal{O}_v\implies x\in \mathcal{O}_v\left[\frac{1}{\varpi}\right].
    \]
\end{prf}

\section{Absolute Value of Field}

\begin{definition}{Absolute Value}{}
    An \textbf{absolute value} on a field \( K \) is a function \( |\cdot| : K \to \mathbb{R}_{\geq 0} \) satisfying the following conditions:

\begin{enumerate}[(i)]
    \item For any \( x \in K \), \( |x| = 0 \iff x = 0 \).
    \item For any \( x, y \in K \), \( |xy| = |x| \cdot |y| \).
    \item For any \( x, y \in K \), \( |x + y| \leq |x| + |y| \).
\end{enumerate}

A field equipped with an absolute value is called a \textbf{normed field}, denoted by \( (K, |\cdot|) \). 
\end{definition}

A normed field $(K, |\cdot|)$ induces a metric $d(x, y) = |x - y|$ on $K$, making it a Hausdorff topological field. 

\begin{definition}{Trivial Absolute Value}{}
    An absolute value $|\cdot|$ on a field $K$ is called \textbf{trivial} if 
    \[
|x| = \begin{cases}
    0 & \text{if } x = 0, \\
    1 & \text{if } x \neq 0.
\end{cases}
\]
    
\end{definition}

\begin{proposition}{Properties of Absolute Value}{}
    Let \( (K, |\cdot|) \) be a normed field. Then we have the following properties:
\begin{enumerate}[(i)]
    \item $|1| = \left|-1\right| = 1$.
    \item $|x| = \left|-x\right|$ for all \( x \in K \).
    \item $|n\cdot 1| \le n$ for all \( n \in \mathbb{Z} \).
\end{enumerate}
\end{proposition}

\begin{definition}{Equivalent Absolute Value}{}
    Two absolute values on a field are said to be \textbf{equivalent} if as topological spaces they are homeomorphic. 
\end{definition}

\begin{proposition}{Equivalent Characterization of Equivalent Absolute Values}{}
    Let $K$ be a field and $|\cdot|$ and $ |\cdot|_\star $ are two nontrivial absolute values on $K$. Then the following are equivalent:
\begin{enumerate}[(i)]
    \item $|\cdot|$ and $ |\cdot|_\star $ are equivalent absolute values.
    \item For any $x\in K$, $|x| < 1 \implies |x|_\star < 1$.
    \item There exists $s > 0$ such that $|\cdot| = |\cdot|_\star^s$.
\end{enumerate}
    
\end{proposition}
\begin{proof}
    (i) $\implies$ (ii): For any $x\in K$ such that $|x|<1$, we have 
    \[  
    \lim_{n\to \infty} |x^n| =\lim_{n\to \infty} |x|^n= 0 ,
    \]
    which implies the sequence $\left(x^n\right)_{n=1}^\infty$ converges to 0 in $(K, |\cdot|)$. Since $(K, |\cdot|)$ and $(K, |\cdot|_\star)$ as topological spaces are homeomorphic, the sequence $\left(x^n\right)_{n=1}^\infty$ also converges to 0 in $(K, |\cdot|_\star)$, which means 
    \[
        \lim_{n\to \infty} |x|_\star^n=\lim_{n\to \infty} |x^n|_\star = 0.
\]
    Therefore, $|x|_\star<1$.

    (ii) $\implies$ (iii): Assume condition (ii): $|x| < 1 \implies |x|_\star < 1$ for all $x \in K$. By considering the inverse $x^{-1}$, we also conclude that $|x| > 1 \implies |x|_\star > 1$.

    Let $y \in K$ such that $|y| > 1$. For any $x \in K^\times-\{1\}$, there exists a real number $r(x)$ such that
    \[
    |x| = |y|^{r(x)},
    \]
    with $r(x) \neq 0$.
    
    Consider a sequence of rational numbers $\left(\frac{m_i}{n_i}\right)_{i=1}^\infty$ such that $\frac{m_i}{n_i} > r(x)$, $n_i > 0$, and
    \[
    \lim_{i \to \infty} \frac{m_i}{n_i} = r(x).
    \]
    Then by assumption (ii), we have
    \[
    |x| < |y|^{m_i / n_i}\implies
    \left| \frac{x^{n_i}}{y^{m_i}} \right| < 1\implies \left| \frac{x^{n_i}}{y^{m_i}} \right|_\star < 1\implies
    |x|_\star < |y|_\star^{m_i / n_i}.
    \]
    
   
    Taking the limit as $i \to \infty$, we obtain
    \[
    |x|_\star \leq |y|_\star^{r(x)}.
    \]
    
    Similarly, by considering a sequence of rational numbers $\left(\frac{m_i}{n_i}\right)_{i=1}^\infty$ such that $\frac{m_i}{n_i} < r(x)$ and $\lim_{i \to \infty} \frac{m_i}{n_i} = r(x)$, we can show that
    \[
    |x|_\star \geq |y|_\star^{r(x)}.
    \]
    Thus, we conclude that
    \[
    |x|_\star = |y|_\star^{r(x)}.
    \]
    Taking the logarithm of both sides, we find
    \[
    \log |x| = r(x) \log |y| \quad \text{and} \quad \log |x|_\star = r(x) \log |y|_\star.
    \]
    Dividing these equations yields
    \[
    \frac{\log |x|}{\log |x|_\star} = \frac{\log |y|}{\log |y|_\star}.
    \]
    Take $t=\frac{\log |y|}{\log |y|_\star} > 0$. We conclude that for all $x \in K$, $|x| = |x|_\star^t$. This completes the proof.

    (iii) $\implies$ (i): Since $|\cdot| = |\cdot|_\star^s$, we can prove that the identity map $f: (K, |\cdot|)\to (K, |\cdot|_\star)$ is a homeomorphism by checking that both $f$ and $f^{-1}$ are continuous. For any $\epsilon$-ball $B_{|\cdot|_\star}(x,\epsilon)$, we have
    \[
    f^{-1}(B_{|\cdot|_\star}(x,\epsilon)) = B_{|\cdot|}(x,\epsilon^{1/s}),
    \]
    which is open in $(K, |\cdot|)$. Thus $f$ is continuous. Similarly, $f^{-1}$ is continuous.
\end{proof}

\begin{definition}{Places of a Field}{}
    Let $K$ be a field. A \textbf{place} on $K$ is an equivalence classes of non-trivial absolute values on $K$. The set of all places on a field $K$ is denoted by $\mathtt{pl}_K$.
\end{definition}

\begin{definition}{Archimedean Absolute Value}{}
    An absolute value is called \textbf{Archimedean} if the set
    \[
    \{|n| : n \in \mathbb{Z}\}
    \] 
    is unbounded in $\mathbb{R}$ equipped with the Euclidean topology. Otherwise, it is called \textbf{non-Archimedean}.
\end{definition}


\begin{example}{Absolute Value Induced by Harr Measure on Locally Compact Hausdorff Topological Field}{}
    Let $K$ be a locally compact Hausdorff topological field. Since the additive group $(K, +)$ is a locally compact Hausdorff group, a Haar measure $\mu $ can be defined on it. Using the Haar measure, an absolute value 
    $$ 
    |\cdot| : a \longmapsto |a| = \frac{\mu(aX)}{\mu(X)} 
    $$ 
    can be defined on the field $K$. The topology induced by this absolute value coincides with the original topology of $K$.
\end{example}

\begin{proposition}{Classification of Non-discrete, Locally Compact Hausdorff Topological Fields}{}
    Let $K$ be a non-discrete, locally compact Hausdorff topological field. There are exactly three possibilities for $K$:
\begin{enumerate}[(i)]
    \item Archimedean fields: $\mathbb{R}$ and $\mathbb{C}$.
    \item $p$-adic number fields: finite extensions of $\mathbb{Q}_p$. These are non-Archimedean fields of characteristic 0.
    \item Function fields over a finite field $\mathbb{F}_q$: finite extensions of the field of formal Laurent series $\mathbb{F}_q(\!(x)\!)$, where $q = p^n$ is a power of a prime. These are non-Archimedean fields of characteristic $p$.
\end{enumerate}
\end{proposition}


\begin{definition}{Local Field}{}
    A \textbf{local field} is a non-discrete, locally compact Hausdorff topological field.
\end{definition}


\begin{definition}{Completion of a Normed Field}{}
    Let \( (K, |\cdot|) \) be a normed field. The \textbf{completion} of \( K \) with respect to the absolute value \( |\cdot| \) is the Cauchy completion of the metric space \( (K, d) \), where \( d(x, y) = |x - y| \).
\end{definition}

The completion of a normed field is functorial, i.e. it is a functor from the category of normed fields to the category of complete normed fields.

\begin{definition}{Global Field}{}
    Let $K$ be a field. $K$ is called a \textbf{global field} if it satisfies the following properties:
    \begin{enumerate}[(i)]
        \item the completion of $K$ with respect to every place on $K$ is a local field
        \item product formula:
        \[
        \prod_{v\in \mathtt{pl}_K} |x|_v = 1.
        \]
    \end{enumerate}
    It can be proven that there are exactly two types of global fields:

\begin{enumerate}[(i)]
    \item Number fields: finite extensions of $\mathbb{Q}$.
    \item Function fields: finite extensions of $\mathbb{F}_q(t)$.
\end{enumerate}   
\end{definition}

\begin{definition}{Finite Places of a Global Field}{}
    Let $K$ be a global field. A place $v$ on $K$ is called \textbf{finite} if either 
    \begin{enumerate}[(i)]
        \item $v$ restricts to a $p$-adic place on $\mathbb{Q}$ for some prime $p$, or
        \item $v$ restricts to a $p(t)$-adic place on $\mathbb{F}_q(t)$ for some prime element $p(t) \in \mathbb{F}_q[t]$.
    \end{enumerate}
\end{definition}





